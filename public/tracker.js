(()=>{let P="navlens-anti-flicker";try{document.getElementById(P)||((e=document.createElement("style")).id=P,e.textContent="html { visibility: hidden !important; opacity: 0 !important; }",document.head.appendChild(e),setTimeout(()=>{var e=document.getElementById(P);e&&(e.remove(),console.warn("[Navlens] Anti-flicker timed out - showing content"))},500))}catch(e){}let H=!1;var e=document.currentScript;let U=e?.dataset?.apiKey||"",c=e?.dataset?.siteId||"",j=(e=e?.dataset?.apiHost||"https://navlens-rho.vercel.app",new URLSearchParams(window.location.search).has("__navlens_editor")),a=(j&&console.log("[Navlens] Editor mode detected - tracking disabled"),c||console.warn("[Navlens] Missing data-site-id attribute. Tracker will not work."),U||console.warn("[Navlens] Missing data-api-key attribute. Tracker will not work."),e.includes("://")?e:"https://"+e),d=a+"/api/v1/ingest",B=d,$=a+"/api/rrweb-events",t=a+"/api/dom-snapshot",z=a+"/api/v1/debug-events",q=a+"/api/v1/form-events",X=a+"/api/feedback",W=a+"/api/feedback-config",Y=(a,a+"/api/v1/batch"),V=a+"/api/tracker-config",J=!0,Z=null;try{var G=document.currentScript,K=G?.dataset?.siteId||"",Q=G?.dataset?.apiHost||"https://navlens-rho.vercel.app",ee=Q.includes("://")?Q:"https://"+Q;K&&(Z=fetch(ee+"/api/tracker-config?siteId="+K,{priority:"high",cache:"default"}).then(e=>e.ok?e.json():null).catch(()=>null))}catch(e){}a;let u={},te=null,ne=(new Set,null);function ae(t){let n=2166136261;for(let e=0;e<t.length;e++)n^=t.charCodeAt(e),n=Math.imul(n,16777619);return n>>>0}let p=null;async function ie(){try{var e,t=await fetch(V+"?siteId="+c,{priority:"high",cache:"default"});if(t.ok)return(e=await t.json()).feedback&&(p=e.feedback,console.log("[Navlens] Merged config loaded (experiments + feedback)")),e}catch(e){console.warn("[navlens] Merged config failed, trying individual:",e.message)}try{var n=await fetch(a+"/api/experiments/config?siteId="+c,{priority:"high",cache:"default"});return n.ok?await n.json():null}catch(e){return console.warn("[navlens] Config fetch failed:",e),null}}function oe(n,a){if(n.dataset.nvApplied!==a.id){let t=a.changes||{};try{switch(a.type){case"css":t.css&&Object.assign(n.style,t.css);break;case"text":void 0!==t.text&&(n.textContent=t.text);break;case"hide":n.style.display="none";break;case"remove":n.remove();break;case"clone":var i=t.cloneCount||1,o=t.clonePosition||"after";for(let e=0;e<i;e++){var r=n.cloneNode(!0);r.removeAttribute("id"),r.removeAttribute("data-nv-applied"),"before"===o?n.parentNode.insertBefore(r,n):n.parentNode.insertBefore(r,n.nextSibling)}break;case"image":var e;t.imageUrl&&(e=e=>{e.dataset.nvImgUrl!==t.imageUrl&&(e.removeAttribute("srcset"),e.removeAttribute("data-srcset"),e.src=t.imageUrl,e.style.cssText+=`content: url(${t.imageUrl}) !important; object-fit: cover !important;`,e.dataset.nvImgUrl=t.imageUrl)},"IMG"===n.tagName?e(n):n.querySelectorAll("img").forEach(e));break;case"link":"A"===n.tagName&&(t.linkUrl&&(n.href=t.linkUrl),t.linkTarget)&&(n.target=t.linkTarget);break;case"insertHtml":var s,l;t.html&&(s=t.html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),l=t.insertPosition||"after",n.insertAdjacentHTML("before"===l?"beforebegin":"after"===l?"afterend":"prepend"===l?"afterbegin":"beforeend",s));break;case"replaceHtml":var c;t.html&&(c=t.html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),n.outerHTML=c);break;case"resize":t.width&&(n.style.width=t.width),t.height&&(n.style.height=t.height);break;case"dragMove":if(t.targetSelector&&t.position)try{var d=document.querySelector(t.targetSelector);d&&d.parentNode&&("before"===t.position?d.parentNode.insertBefore(n,d):d.parentNode.insertBefore(n,d.nextSibling))}catch(e){console.warn("[navlens] Failed to replay dragMove:",e)}break;case"reorder":var u,p,m;"number"==typeof t.newIndex&&(u=n.parentNode,m=(p=Array.from(u.children))[Math.min(t.newIndex,p.length-1)])&&m!==n&&u.insertBefore(n,m);break;case"move":t.position&&(n.style.transform=`translate(${t.position.x||0}px, ${t.position.y||0}px)`);break;case"attribute":t.attributes&&Object.entries(t.attributes).forEach(([e,t])=>{e.toLowerCase().startsWith("on")||n.setAttribute(e,t)});break;case"class":t.addClass&&Array.isArray(t.addClass)&&t.addClass.forEach(e=>{e&&"string"==typeof e&&n.classList.add(e)}),t.removeClass&&Array.isArray(t.removeClass)&&t.removeClass.forEach(e=>{e&&"string"==typeof e&&n.classList.remove(e)});break;case"clickRedirect":t.redirectUrl&&(n.style.cursor="pointer",n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),window.location.href=t.redirectUrl},{once:!1}));break;case"tooltip":t.tooltipText&&(n.title=t.tooltipText);break;case"sticky":n.style.position="sticky",n.style.top=t.stickyTop||"0px",n.style.zIndex=t.stickyZIndex||1e3;break;case"placeholder":void 0===t.placeholderText||"INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName||(n.placeholder=t.placeholderText);break;case"formAction":t.formActionUrl&&"FORM"===n.tagName&&(n.action=t.formActionUrl);break;case"animation":var h,v,g,f;t.animationName&&(h=t.animationDuration||"0.5s",document.getElementById("nv-animation-styles")||((v=document.createElement("style")).id="nv-animation-styles",v.textContent=`
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
                @keyframes slideInLeft { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
                @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
                @keyframes slideInUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
                @keyframes slideInDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
                @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-20px); } 60% { transform: translateY(-10px); } }
                @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
                @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }
              `,document.head.appendChild(v)),"custom"===t.animationName&&t.animationCustom?(n.style.transition="all "+h,t.animationCustom.split(";").forEach(e=>{var[e,t]=e.split(":").map(e=>e.trim());e&&t&&(e=e.replace(/-([a-z])/g,e=>e[1].toUpperCase()),n.style[e]=t)})):(g=t.animationIteration||"1",f=t.animationDelay||"0s",n.style.animation=t.animationName+` ${h} ${f} `+g));break;case"html":t.html&&(n.innerHTML=t.html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""))}n.dataset.nvApplied=a.id}catch(e){console.warn("[navlens] Failed to apply modification:",a.type,e)}}}function re(e,i){if(!e?.experiments?.length)return[];let o=[];e.experiments.forEach(e=>{var n=e.v||[];if(n.length){var a=(e.t||100)/100,t=ae(i+`-${e.id}-traffic`)/4294967295;if(!(a<t)){let t=n[((e,t,n)=>{e=ae(e+"-"+t),t=e/4294967296;let a=0;for(let e=0;e<n.length;e++)a+=void 0!==n[e].weight?n[e].weight:50;if(a<=0)return e%n.length;var i=t*a;let o=0;for(let e=0;e<n.length;e++)if(i<(o+=void 0!==n[e].weight?n[e].weight:50))return e;return n.length-1})(i,e.id,n)];t&&(u[e.id]=t.id,a=(e.m||[]).filter(e=>e.variant_id===t.id),o.push(...a))}}}),window.__NAVLENS_EXPERIMENTS={...u};e=new Date(Date.now()+2592e6).toUTCString();return document.cookie=`navlens_exp=${encodeURIComponent(JSON.stringify(u))}; expires=${e}; path=/; SameSite=Lax`,o}async function se(){var e=performance.now();let t=document.cookie.match(/navlens_visitor=([^;]+)/)?.[1];t||(t="v_"+Math.random().toString(36).substr(2,9),a=new Date(Date.now()+31536e6).toUTCString(),document.cookie=`navlens_visitor=${t}; expires=${a}; path=/; SameSite=Lax`);var n,a=document.cookie.match(/navlens_exp=([^;]+)/)?.[1];if(a)try{Object.assign(u,JSON.parse(decodeURIComponent(a)))}catch(e){}let i=null,o=!1;try{var r=localStorage.getItem("navlens_config");r&&((l=JSON.parse(r)).data?.feedback?(i=l.data,p=i.feedback,o=3e5<Date.now()-l.timestamp,console.log("[Navlens] Using cached config (stale-while-revalidate)")):l.data&&!l.data.feedback&&localStorage.removeItem("navlens_config"))}catch(e){}function s(e){return e.replace(/\.([a-z0-9-]+):([a-z0-9-]+)/gi,".$1\\:$2")}i?o&&ie().then(e=>{if(e)try{localStorage.setItem("navlens_config",JSON.stringify({data:e,timestamp:Date.now()}))}catch(e){}}):(a=Z||ie(),i=await Promise.race([a.then(e=>{if(e)try{localStorage.setItem("navlens_config",JSON.stringify({data:e,timestamp:Date.now()})),e.feedback&&(p=e.feedback)}catch(e){}return e}),new Promise(e=>setTimeout(()=>e(null),500))])),i&&((r=re(te=i,t)).length&&(n=r)?.length&&(n.forEach(t=>{try{var e=s(t.selector);document.querySelectorAll(e).forEach(e=>oe(e,t))}catch(e){console.warn("[navlens] Invalid selector:",t.selector,e)}}),ne&&ne.disconnect(),(ne=new MutationObserver(()=>{n.forEach(t=>{try{var e=s(t.selector);document.querySelectorAll(e).forEach(e=>{e.dataset.nvApplied!==t.id&&oe(e,t)})}catch(e){}})})).observe(document.documentElement,{childList:!0,subtree:!0})),setTimeout(()=>{m("pageview",{url:window.location.href,path:window.location.pathname}),H&&console.log("[navlens] Pageview goal check triggered for "+window.location.pathname)},100));var l=document.getElementById(P),a=(l&&l.remove(),"hidden"===document.documentElement.style.visibility&&(document.documentElement.style.visibility=""),performance.now()-e);100<a&&console.log(`[navlens] Experiments loaded in ${a.toFixed(0)}ms`)}function le(){return u=window.__NAVLENS_EXPERIMENTS&&"object"==typeof window.__NAVLENS_EXPERIMENTS?{...u,...window.__NAVLENS_EXPERIMENTS}:u}let ce=new Set;function de(e,t,n){if(!t)return!0;var a=e.split("?")[0].split("#")[0].replace(/\/$/,"")||"/",i=t.split("?")[0].split("#")[0].replace(/\/$/,"")||"/";let o=a;try{a.startsWith("http")&&(o=new URL(a).pathname.replace(/\/$/,"")||"/")}catch(e){o=a.replace(/^https?:\/\/[^\/]+/,"").replace(/\/$/,"")||"/"}switch(n){case"exact":return o===i||a===i;case"contains":return o.includes(t)||a.includes(t);case"regex":try{return new RegExp(t).test(o)||new RegExp(t).test(e)}catch{return!1}default:return o.includes(t)}}function m(e,t){var n,a,i,o,r;if(te?.experiments)for(var s of te.experiments){var l=u[s.id];if(l){var c,d=s.g||s.goal_event;for(c of s.goals||(d?[{id:"legacy_goal",name:d,type:"custom_event",event_name:d,is_primary:!0}]:[]))((e,t,n)=>{switch(H&&console.log(`[navlens] Evaluating goal: ${e.name} (${e.type}) against event: `+t),e.type){case"click":if("click"!==t)return;if(e.selector&&n.element)try{return n.element.matches(e.selector)||null!==n.element.closest(e.selector)}catch{return}return e.url_pattern?de(window.location.href,e.url_pattern,e.url_match||"contains"):!e.selector;case"pageview":return"pageview"!==t?void 0:(a=de(window.location.href,e.url_pattern,e.url_match||"contains"),H&&console.log(`[navlens] Pageview goal: pattern="${e.url_pattern}" match="${e.url_match}" url="${window.location.pathname}" result=`+a),a);case"form_submit":if("form_submit"!==t&&"submit"!==t)return;if(e.selector&&n.element)try{return n.element.matches(e.selector)||null!==n.element.closest(e.selector)}catch{return}return 1;case"custom_event":return t===e.event_name;case"scroll_depth":return"scroll_depth"!==t?void 0:(a=e.depth_percentage||50,(n.depth||0)>=a);case"time_on_page":var a;return"time_threshold"!==t?void 0:(a=e.seconds||30,(n.seconds||0)>=a);case"revenue":return t!==e.event_name?void 0:1;default:return}})(c,e,t)&&(n=s.id,a=l,i=c,o=t,r=void 0,r=n+":"+i.id,ce.has(r)||(ce.add(r),r={event_type:"experiment_goal",experiment_id:n,variant_id:a,goal_id:i.id,goal_type:i.type,goal_name:i.name,is_primary:i.is_primary,timestamp:Date.now(),page_path:window.location.pathname},"revenue"===i.type&&i.track_value&&i.value_field&&"number"==typeof(a=o.properties?.[i.value_field]||o[i.value_field])&&(r.revenue_value=a,r.currency=i.currency||"USD"),h(B,r),H&&console.log(`[navlens] Goal tracked: ${i.name} (${i.type}) for experiment `+n)))}}}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{m("pageview",{})},100)});let ue=[25,50,75,90,100],pe=new Set,me=(window.addEventListener("scroll",()=>{var e=document.documentElement.scrollHeight-window.innerHeight;if(!(e<=0)){var t=Math.round(window.scrollY/e*100);if(t>C){C=t;for(var n of ue)t>=n&&!pe.has(n)&&(pe.add(n),m("scroll_depth",{depth:n}))}}},{passive:!0}),Date.now()),he=[15,30,60,120,300],ve=new Set,ge=(setInterval(()=>{var e,t=Math.floor((Date.now()-me)/1e3);for(e of he)t>=e&&!ve.has(e)&&(ve.add(e),m("time_threshold",{seconds:e}))},5e3),document.addEventListener("click",e=>{e=e.target;e&&!e.closest?.("[data-navlens-ignore]")&&m("click",{element:e,selector:e.tagName?.toLowerCase()})},!0),document.addEventListener("submit",e=>{e=e.target;e&&m("form_submit",{element:e,formId:e.id,formAction:e.action})},!0),history.pushState),fe=history.replaceState;function we(){setTimeout(()=>{m("pageview",{url:window.location.href,path:window.location.pathname}),window.navlens&&window.navlens.getExperiments&&window.navlens.getExperiments()},100)}history.pushState=function(){ge.apply(this,arguments),we()},history.replaceState=function(){fe.apply(this,arguments),we()},window.addEventListener("popstate",we),window.navlens=window.navlens||{},window.navlens.setExperiment=function(e,t){u[e]=t,window.__NAVLENS_EXPERIMENTS={...le()}},window.navlens.getExperiments=le,window.navlens.reloadExperiments=se,window.navlens.track=function(e,t={}){m(e,{properties:t}),h(B,{event_type:e,properties:t,timestamp:Date.now(),page_path:window.location.pathname})},window.navlens.trackRevenue=function(e,t,n={}){m(e,{properties:{...n,amount:t,value:t},amount:t}),h(B,{event_type:e,revenue:t,properties:n,timestamp:Date.now(),page_path:window.location.pathname})};let _e=se();function ye(e){var e={...e},t=(e.event_type&&(e.type=e.event_type,delete e.event_type),e.timestamp||(e.timestamp=(new Date).toISOString()),e.session_id||(e.session_id=E),e.device_info||x());let n={type:e.type,timestamp:e.timestamp,session_id:e.session_id,user_id:e.user_id||null,page_url:e.page_url||window.location.href,page_path:e.page_path||window.location.pathname,referrer:e.referrer||document.referrer||"",user_agent:t.user_agent||navigator.userAgent,user_language:t.language||navigator.language,viewport_width:t.viewport_width||window.innerWidth,viewport_height:t.viewport_height||window.innerHeight,screen_width:t.screen_width||screen.width,screen_height:t.screen_height||screen.height,device_type:t.device_type||pt(),client_id:e.client_id||U,load_time:e.load_time||0,experiment_ids:Object.keys(le()),variant_ids:Object.values(le()),data:{event_id:e.event_id,element_selector:e.element_selector,element_tag:e.element_tag,element_id:e.element_id,element_classes:e.element_class,element_text:e.element_text,element_href:e.element_href,x:e.x,y:e.y,click_x:e.click_x,click_y:e.click_y,page_x:e.page_x,page_y:e.page_y,x_relative:e.x_relative,y_relative:e.y_relative,document_width:e.document_width,document_height:e.document_height,element_position:e.element_position,is_interactive:e.is_interactive,is_dead_click:e.is_dead_click,scroll_depth:e.scroll_depth,max_scroll_depth:e.max_scroll_depth,click_count:e.click_count,visible_time_ms:e.visible_time_ms,total_visible_time_ms:e.total_visible_time_ms,page_title:e.page_title,event_name:e.event_name,properties:e.properties,traits:e.traits}};return Object.keys(n.data).forEach(e=>{void 0===n.data[e]&&delete n.data[e]}),{events:[n],siteId:c}}function h(e,t){t=ye(t),t=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon?navigator.sendBeacon(e,t):fetch(e,{method:"POST",body:t,keepalive:!0}).catch(console.error)}async function v(e,t){return g(e,ye(t))}new URLSearchParams(window.location.search).has("__navlens_editor")&&((e=document.createElement("script")).src=a+"/ab-editor.js",e.async=!0,document.head.appendChild(e));let i="navlens_session",be="navlens_visitor",Se=18e5,n=null,ke=null,o=[],Ee=!1,xe=16;function Ie(n,a="idle"){return new Promise((e,t)=>{e={task:n,priority:a,resolve:e,reject:t,timestamp:Date.now()};if("high"===a?o.unshift(e):o.push(e),!Ee)if(0===o.length)Ee=!1;else{Ee=!0;let i=e=>{for(;0<o.length&&(0<e?.timeRemaining?.()||!e);){var t=performance.now(),n=o.shift();try{var a=n.task();a instanceof Promise?a.then(n.resolve).catch(n.reject):n.resolve(a)}catch(e){n.reject(e)}if(performance.now()-t>xe)break}0<o.length?"undefined"!=typeof requestIdleCallback?requestIdleCallback(i,{timeout:100}):setTimeout(()=>i(null),0):Ee=!1};"undefined"!=typeof requestIdleCallback?requestIdleCallback(i,{timeout:100}):setTimeout(()=>i(null),0)}})}async function Te(e){e="string"==typeof e?e:JSON.stringify(e);let t=(new TextEncoder).encode(e);if("undefined"==typeof CompressionStream)return new Blob([t],{type:"application/json"});try{for(var n=new ReadableStream({start(e){e.enqueue(t),e.close()}}).pipeThrough(new CompressionStream("gzip")).getReader(),a=[];;){var{done:i,value:o}=await n.read();if(i)break;a.push(o)}var r,s=a.reduce((e,t)=>e+t.length,0),l=new Uint8Array(s);let e=0;for(r of a)l.set(r,e),e+=r.length;return new Blob([l],{type:"application/gzip"})}catch(e){return console.warn("[Navlens] Compression failed, sending uncompressed:",e),new Blob([t],{type:"application/json"})}}let Ne=[],Ce=3,Me=5e3,Le=null;function Ae(e,t,n=0){n>=Ce?console.warn("[Navlens] Max retries reached, dropping event"):(Ne.push({url:e,payload:t,retryCount:n}),De())}function De(){Le=Le||setTimeout(Oe,Me)}async function Oe(){if(Le=null,0!==Ne.length){var t;for(t of Ne.splice(0,5))try{await g(t.url,t.payload,!1)}catch(e){Ae(t.url,t.payload,t.retryCount+1)}0<Ne.length&&De()}}async function g(t,n,a=!0){var e=await Te(n),i="application/gzip"===e.type,o={"x-api-key":U},i=(i&&(o["Content-Encoding"]="gzip"),o["Content-Type"]="application/json",e.size||0),i=i<6e4;try{var r=await fetch(t,{method:"POST",headers:o,body:e,keepalive:i});if(!r.ok&&a)throw new Error("HTTP "+r.status);return r}catch(e){throw a&&Ae(t,n),e}}let Fe={email:{pattern:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,replacement:"[EMAIL_REDACTED]"},phone:{pattern:/(?:\+?1[-.\s]?)?(?:\(?[0-9]{3}\)?[-.\s]?)?[0-9]{3}[-.\s]?[0-9]{4}/g,replacement:"[PHONE_REDACTED]"},creditCard:{pattern:/(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12})/g,replacement:"[CC_REDACTED]"},ssn:{pattern:/\b\d{3}[-.\s]?\d{2}[-.\s]?\d{4}\b/g,replacement:"[SSN_REDACTED]"},ipAddress:{pattern:/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/g,replacement:"[IP_REDACTED]"}};function f(e){if("string"!=typeof e)return e;let t=e;for(var[n,a]of Object.entries(Fe))t=t.replace(a.pattern,a.replacement);return t}function r(e,t=0){if(10<t)return e;if(null==e)return e;if("string"==typeof e)return f(e);if(Array.isArray(e))return e.map(e=>r(e,t+1));if("object"!=typeof e)return e;var n,a,i={};for([n,a]of Object.entries(e))i[n]=r(a,t+1);return i}let s=[],Re=2e3,Pe=10,l=0,w=0,_=null,He=!1;function y(e){s.push({...e,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname}),s.length>=Pe?Ue():_=_||setTimeout(Ue,Re)}async function Ue(){if(_&&(clearTimeout(_),_=null),0!==s.length){var e=s.splice(0,s.length);try{await g(z,{events:e,siteId:c,sessionId:E},!1)}catch(e){console.warn("[Navlens] Debug event send failed:",e.message)}}}setInterval(async function(){var e=s.splice(0,s.length),t=void 0!==b?b.splice(0,b.length):[];if(0!==e.length||0!==t.length){if(_&&(clearTimeout(_),_=null),void 0!==S&&S&&(clearTimeout(S),S=null),J)try{return void await g(Y,{siteId:c,sessionId:E,batch:{debug:0<e.length?e:void 0,forms:0<t.length?t:void 0}},!1)}catch(e){console.warn("[Navlens] Batch send failed, falling back to individual:",e.message),J=!1}0<e.length&&g(z,{events:e,siteId:c,sessionId:E},!1).catch(()=>{}),0<t.length&&g(q,{events:t,siteId:c,sessionId:E},!1).catch(()=>{})}},3e3);let je={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug},Be=(["log","warn","error","info","debug"].forEach(function(t){console[t]=function(...e){je[t].apply(console,e),100<=l||(e=e.map(e=>{try{return"object"==typeof e?JSON.stringify(e):String(e)}catch{return"[Unserializable]"}}).join(" ")).includes("[Navlens]")||(l++,y({type:"console",level:t,message:f(e.substring(0,5e3)),stack:"error"===t?(()=>{try{throw new Error}catch(e){return(e.stack||"").split("\n").slice(3).join("\n").substring(0,2e3)}})():""}))}}),window.addEventListener("error",function(e){100<=l||(l++,y({type:"console",level:"error",message:f("Uncaught: "+e.message),stack:e.error?.stack?f(e.error.stack.substring(0,2e3)):""}))}),window.addEventListener("unhandledrejection",function(e){100<=l||(l++,y({type:"console",level:"error",message:f("Unhandled Promise: "+((e=e.reason)?.message||String(e))),stack:e?.stack?f(e.stack.substring(0,2e3)):""}))}),["/api/v1/ingest","/api/v1/debug-events","/api/rrweb-events","/api/dom-snapshot","navlens"]);function $e(t){return t&&"string"==typeof t&&Be.some(e=>t.includes(e))}function ze(e){try{let t=new URL(e,window.location.origin);return["token","key","password","secret","auth","api_key","apikey","access_token"].forEach(e=>{t.searchParams.has(e)&&t.searchParams.set(e,"[REDACTED]")}),t.toString()}catch{return f(String(e))}}let qe=window.fetch,Xe=(window.fetch=function(...t){let n="",a="GET";try{var e=t[0],i=t[1];"string"==typeof e?n=e:e instanceof URL?n=e.toString():e instanceof Request?(n=e.url,a=e.method||"GET"):"object"==typeof e&&null!==e&&"url"in e&&(n=e.url),i&&"object"==typeof i&&i.method&&(a=i.method)}catch(e){return qe.apply(this,t)}if(n&&$e(n))return qe.apply(this,t);let o=performance.now();return qe.apply(this,t).then(e=>{var t=Math.round(performance.now()-o);return w<200&&(w++,y({type:"network",method:a.toUpperCase(),url:ze(n),status:e.status,duration_ms:t,network_type:"fetch",initiator:"script"})),e}).catch(e=>{var t=Math.round(performance.now()-o);throw w<200&&(w++,y({type:"network",method:a.toUpperCase(),url:ze(n),status:0,duration_ms:t,network_type:"fetch",initiator:"script"})),e})},XMLHttpRequest.prototype.open),We=XMLHttpRequest.prototype.send;function Ye(e,t){var[e,n]={LCP:[2500,4e3],FID:[100,300],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]}[e]||[1/0,1/0];return t<=e?"good":t<=n?"needs-improvement":"poor"}if(XMLHttpRequest.prototype.open=function(e,t){return this._navlens_method=e,this._navlens_url=t,this._navlens_start=null,Xe.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){let n=this._navlens_url;if(!$e(n)){this._navlens_start=performance.now();let t=this._navlens_method||"GET";this.addEventListener("loadend",()=>{var e;200<=w||(e=Math.round(performance.now()-this._navlens_start),w++,y({type:"network",method:t.toUpperCase(),url:ze(n),status:this.status,duration_ms:e,network_type:"xhr",initiator:"script"}))})}return We.apply(this,arguments)},"undefined"!=typeof PerformanceObserver){try{new PerformanceObserver(e=>{e=e.getEntries(),e=e[e.length-1];e&&y({type:"web_vital",vital_name:"LCP",vital_value:Math.round(e.startTime),vital_rating:Ye("LCP",e.startTime)})}).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{e=e.getEntries().find(e=>"first-contentful-paint"===e.name);e&&y({type:"web_vital",vital_name:"FCP",vital_value:Math.round(e.startTime),vital_rating:Ye("FCP",e.startTime)})}).observe({type:"paint",buffered:!0})}catch(e){}try{let n=0;new PerformanceObserver(e=>{for(var t of e.getEntries())t.hadRecentInput||(n+=t.value)}).observe({type:"layout-shift",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"!==document.visibilityState||He||y({type:"web_vital",vital_name:"CLS",vital_value:Math.round(1e3*n)/1e3,vital_rating:Ye("CLS",n)})})}catch(e){}try{let n=0;new PerformanceObserver(e=>{for(var t of e.getEntries()){t=t.processingEnd-t.startTime;t>n&&(n=t)}}).observe({type:"event",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&0<n&&!He&&(y({type:"web_vital",vital_name:"INP",vital_value:Math.round(n),vital_rating:Ye("INP",n)}),He=!0,Ue())})}catch(e){}try{var Ve,Je=performance.getEntriesByType("navigation")[0];Je&&(Ve=Je.responseStart-Je.requestStart,y({type:"web_vital",vital_name:"TTFB",vital_value:Math.round(Ve),vital_rating:Ye("TTFB",Ve)}))}catch(e){}}window.addEventListener("beforeunload",Ue),window.addEventListener("pagehide",Ue);let b=[],Ze=3e3,Ge=10,S=null,Ke=new Map,Qe=new Map,et=[/password/i,/ssn/i,/social.*security/i,/credit.*card/i,/card.*number/i,/cvv/i,/cvc/i,/pin/i,/secret/i];function tt(e){if("password"===e.type)return 1;let t=(e.name||"")+(e.id||"");return et.some(e=>e.test(t))}function nt(e){return e.id?"id:"+e.id:e.name?"name:"+e.name:"form:"+Array.from(document.forms).indexOf(e)}function at(t){var e;return t.id||t.name||((e=t.form)?(e=Array.from(e.elements).filter(e=>e.type===t.type).indexOf(t),t.type+"_"+e):"field_"+Math.random().toString(36).substr(2,9))}function it(e){var t=e.form;return t?Array.from(t.elements).filter(e=>["input","select","textarea"].includes(e.tagName.toLowerCase())&&!["hidden","submit","button","reset"].includes(e.type)).indexOf(e)+1:0}function ot(e){b.push({...e,timestamp:(new Date).toISOString()}),b.length>=Ge?rt():S=S||setTimeout(rt,Ze)}async function rt(){if(S&&(clearTimeout(S),S=null),0!==b.length){var e=b.splice(0,b.length);try{await g(q,{events:e,siteId:c,sessionId:E},!1)}catch(e){}}}function st(e){var e=nt(e.target),t=Qe.get(e);t&&(t.hasSubmitted=!0,ot({form_id:e,form_url:window.location.href,field_id:"",field_name:"",field_type:"",field_index:0,interaction_type:"submit",was_submitted:!0}),rt())}function lt(){Qe.forEach((e,t)=>{!e.hasSubmitted&&0<e.fields.size&&ot({form_id:t,form_url:window.location.href,field_id:"",field_name:"",field_type:"",field_index:0,interaction_type:"abandon",was_submitted:!1})}),rt()}function ct(){try{var e,t=localStorage.getItem(i);t&&((e=JSON.parse(t)).lastActivity=Date.now(),localStorage.setItem(i,JSON.stringify(e)))}catch(e){}}function dt(){return"sess_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+"_"+Date.now()}function k(){return"evt_"+Math.random().toString(36).substring(2,15)+"_"+Date.now()}document.addEventListener("focusin",e=>{var t,n,a;e.target.tagName&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&(e=(e=e).target).form&&!tt(e)&&(t=at(e),n=nt(e.form),a=Date.now(),Ke.set(t,{focusTime:a,changeCount:0,lastValueLength:(e.value||"").length,wasRefilled:!1}),Qe.has(n)||Qe.set(n,{fields:new Set,hasSubmitted:!1}),Qe.get(n).fields.add(t),ot({form_id:n,form_url:window.location.href,field_id:t,field_name:e.name||"",field_type:e.type||"text",field_index:it(e),interaction_type:"focus",focus_time:new Date(a).toISOString()}))},!0),document.addEventListener("focusout",e=>{var t,n,a,i,o,r;e.target.tagName&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&(e=(e=e).target).form&&!tt(e)&&(t=at(e),n=nt(e.form),a=Ke.get(t),i=Date.now(),a)&&(o=i-a.focusTime,r=0<(e.value||"").length,ot({form_id:n,form_url:window.location.href,field_id:t,field_name:e.name||"",field_type:e.type||"text",field_index:it(e),interaction_type:"blur",focus_time:new Date(a.focusTime).toISOString(),blur_time:new Date(i).toISOString(),time_spent_ms:Math.min(o,36e5),change_count:a.changeCount,was_refilled:a.wasRefilled,field_had_value:r}),Ke.delete(t))},!0),document.addEventListener("input",e=>{var t,n;e.target.tagName&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&(e=(e=e).target).form&&!tt(e)&&(t=at(e),t=Ke.get(t))&&(t.changeCount++,e=(e.value||"").length,0<(n=t.lastValueLength)&&e<.5*n?t.deletedContent=!0:t.deletedContent&&n<e&&(t.wasRefilled=!0,t.deletedContent=!1),t.lastValueLength=e)},!0),document.addEventListener("submit",st,!0),window.addEventListener("beforeunload",lt),window.addEventListener("pagehide",lt),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&lt()});let E=(()=>{try{var e=localStorage.getItem(i);if(e){var t=JSON.parse(e),n=Date.now();if(n-t.lastActivity<18e5)return t.lastActivity=n,localStorage.setItem(i,JSON.stringify(t)),t.id}}catch(e){}return e={id:dt(),createdAt:Date.now(),lastActivity:Date.now()},localStorage.setItem(i,JSON.stringify(e)),e.id})(),ut=(()=>{try{var e=localStorage.getItem(be);if(e)return e}catch(e){}e="vis_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+"_"+Date.now();try{localStorage.setItem(be,e)}catch(e){}return e})();function pt(){var e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"}function x(){return{browser:(()=>{var e=navigator.userAgent;let t="Unknown";return e.includes("Firefox/")?t="Firefox":e.includes("Edg/")?t="Edge":e.includes("Chrome/")?t="Chrome":e.includes("Safari/")&&!e.includes("Chrome")?t="Safari":(e.includes("MSIE")||e.includes("Trident/"))&&(t="IE"),t})(),device_type:pt(),screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,user_agent:navigator.userAgent,language:navigator.language,platform:navigator.platform}}function I(){return{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}}function mt(){try{var e=document.body;if(!e)return null;var a=e.querySelectorAll("*");let t="";var i=Math.max(1,Math.floor(a.length/500));for(let e=0;e<a.length;e+=i){var o,r=a[e];t+=r.tagName,r.id&&(t+="#"+r.id),r.className&&"string"==typeof r.className&&(o=r.className.trim().split(/\s+/).slice(0,2).join("."))&&(t+="."+o),t+="|"}var s=I();t+=`D:${s.width}x`+s.height;let n=5381;for(let e=0;e<t.length;e++)n=(n<<5)+n+t.charCodeAt(e),n&=n;return n.toString(36)}catch(e){return console.warn("[Navlens] DOM hash generation failed:",e),null}}async function T(){let t=mt();t&&n&&t!==n&&(console.log("[Navlens] DOM structure changed, capturing new snapshot"),Ie(async()=>{var e=await Mt();e&&(e.hash=t,e.previous_hash=n,await Lt(e))},"idle")),n=t}function ht(){n=mt(),ke=setInterval(T,Se),window.addEventListener("resize",((t,n)=>{let a;return function(...e){clearTimeout(a),a=setTimeout(()=>t.apply(this,e),n)}})(T,1e3)),window.addEventListener("orientationchange",()=>setTimeout(T,500))}function vt(e){if(!e)return"";var t=[];let n=e;for(;n&&n!==document.body&&t.length<5;){let e=n.tagName.toLowerCase();if(n.id){e+="#"+n.id,t.unshift(e);break}n.className&&"string"==typeof n.className&&0<(i=n.className.trim().split(/\s+/).filter(e=>e&&!e.startsWith("ng-"))).length&&(e+="."+i.slice(0,2).join("."));var a,i=n.parentElement;i&&1<(a=Array.from(i.children).filter(e=>e.tagName===n.tagName)).length&&0<=(a=a.indexOf(n))&&(e+=`:nth-of-type(${a+1})`),t.unshift(e),n=i}return t.join(" > ")}function gt(e){e=e.getBoundingClientRect();return{x:Math.round(e.left+window.scrollX),y:Math.round(e.top+window.scrollY),width:Math.round(e.width),height:Math.round(e.height),viewport_x:Math.round(e.left),viewport_y:Math.round(e.top)}}function ft(e){return!(!e||!["A","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO","AUDIO"].includes(e.tagName)&&"button"!==e.getAttribute("role")&&null===e.getAttribute("tabindex")&&!e.onclick&&"pointer"!==window.getComputedStyle(e).cursor)}let wt=!1,_t=null,yt=null,N=[],bt=!1,St=100,kt=5e3;function Et(a){return new Promise((e,t)=>{var n;document.querySelector(`script[src="${a}"]`)?e():((n=document.createElement("script")).src=a,n.onload=e,n.onerror=t,document.head.appendChild(n))})}async function xt(){if("undefined"==typeof rrweb)try{console.log("[Navlens] Loading rrweb..."),await Et(a+"/rrweb.min.js")}catch(e){return void console.warn("[Navlens] Failed to load rrweb, session recording disabled")}if(!bt)try{bt=!0,yt=rrweb.record({emit(e){e=r(e);N.push(e),N.length>=St&&(It||Tt||(It=!0,setTimeout(()=>{It=!1,Ct()},Nt)))},sampling:{mousemove:50,mouseInteraction:!0,scroll:150,input:"last"},blockClass:"navlens-block",ignoreClass:"navlens-ignore",maskTextClass:"navlens-mask",maskAllInputs:!0}),setInterval(Ct,2*kt),console.log("[Navlens] Session recording initialized")}catch(e){console.error("[Navlens] Failed to initialize rrweb:",e),bt=!1}}let It=!1,Tt=!1,Nt=5e3;async function Ct(){if(!Tt&&0!==N.length){Tt=!0;var t=N.splice(0,N.length),e=x(),e={site_id:c,session_id:E,visitor_id:ut,events:t,timestamp:(new Date).toISOString(),page_path:window.location.pathname,user_agent:navigator.userAgent,screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,referrer:document.referrer,device_pixel_ratio:window.devicePixelRatio||1,platform:navigator.platform,cookie_enabled:navigator.cookieEnabled,online:navigator.onLine,device_type:e.device_type};try{await g($,e)}catch(e){console.error("[Navlens] Failed to send rrweb events:",e);var n=t.slice(0,500-N.length);N.unshift(...n)}finally{Tt=!1}}}async function Mt(t=null){return Ie(async()=>{if(void 0===window.rrwebSnapshot||!window.rrwebSnapshot?.snapshot)try{console.log("[Navlens] Loading rrweb-snapshot..."),await Et("https://cdn.jsdelivr.net/npm/rrweb-snapshot@latest/dist/rrweb-snapshot.min.js")}catch(e){return console.warn("[Navlens] Failed to load rrweb-snapshot"),null}if(void 0===window.rrwebSnapshot||!window.rrwebSnapshot?.snapshot)return console.warn("[Navlens] rrweb-snapshot still not loaded after attempt"),null;try{var e=window.rrwebSnapshot.snapshot(document);return{site_id:c,page_path:window.location.pathname,device_type:t?t.name:pt(),snapshot:r(e),width:t?t.width:window.innerWidth,height:t?t.height:window.innerHeight,origin:window.location.origin,timestamp:(new Date).toISOString()}}catch(e){return console.error("[Navlens] Snapshot capture failed:",e),null}},"normal")}async function Lt(e){if(e)try{await g(t,e),console.log("[Navlens] Snapshot sent successfully")}catch(e){console.error("[Navlens] Failed to send snapshot:",e)}}let C=0,At=null;function Dt(){window.addEventListener("scroll",()=>{clearTimeout(At),At=setTimeout(()=>{e=window.scrollY;var e,t=(t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-window.innerHeight)<=0?100:(e=Math.round(e/t*100),Math.min(Math.max(e,0),100));t>C&&(C=t)},100)},{passive:!0})}let Ot={DIRECTION_CHANGE_THRESHOLD:5,TIME_WINDOW_MS:2e3,MIN_SCROLL_DISTANCE:50,COOLDOWN_MS:5e3},M=[],Ft=window.scrollY,Rt=null,Pt=0,Ht=null;function Ut(){var e,t=window.scrollY,n=t-Ft;let a=Date.now();Math.abs(n)<Ot.MIN_SCROLL_DISTANCE?Ft=t:(e=0<n?"down":"up",null!==Rt&&e!==Rt&&M.push({time:a,direction:e,delta:Math.abs(n)}),Rt=e,Ft=t,(M=20<(M=M.filter(e=>a-e.time<Ot.TIME_WINDOW_MS)).length?M.slice(-20):M).length>=Ot.DIRECTION_CHANGE_THRESHOLD&&(a-Pt<Ot.COOLDOWN_MS||(n=M.reduce((e,t)=>e+t.delta,0)/M.length,e=a-M[0].time,t=M.length/e*1e3,e=Math.min(1,t*n/500),t=e,n=M.length,e=I(),n={event_type:"confusion_scroll",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,scroll_depth:C,confusion_scroll_score:parseFloat(t.toFixed(3)),cursor_direction_changes:n,document_width:e.width,document_height:e.height,device_info:x()},v(d,n).catch(console.error),console.log("[Navlens] Confusion scrolling detected! Score:",t.toFixed(2)),Pt=a,M=[])))}let jt={SAMPLE_INTERVAL_MS:50,MIN_HOVER_DURATION_MS:500,BATCH_SIZE:50,FLUSH_INTERVAL_MS:1e4,MAX_BUFFER_SIZE:200},L=[],A=new Map,Bt={x:0,y:0},$t=0,zt=null,qt=!1,Xt=null;function Wt(n){var a=Date.now();if(!Xt){Xt=setTimeout(()=>Xt=null,jt.SAMPLE_INTERVAL_MS);var i=n.clientX,o=n.clientY,r=n.pageX,n=n.pageY,s=I(),l=i-Bt.x,c=o-Bt.y,d=a-$t,l=Math.sqrt(l*l+c*c),c=0<d?l/d:0,l=(Bt={x:i,y:o},$t=a,qt=!0,document.elementFromPoint(i,o));let e="",t="";if(l){e=vt(l);d=l.tagName.toLowerCase(),i=(t=["h1","h2","h3","h4","h5","h6"].includes(d)?"heading":["p","article","section"].includes(d)?"content":["a","button"].includes(d)||"button"===l.getAttribute("role")?"interactive":["img","video","svg","canvas"].includes(d)?"media":["nav","header","footer"].includes(d)?"navigation":["form","input","select","textarea"].includes(d)?"form":"other",e),o=a;if(A.has(i)||A.set(i,{startTime:o,totalTime:0}),(i=A.get(i)).lastUpdate&&o-i.lastUpdate<200&&(i.totalTime+=o-i.lastUpdate),i.lastUpdate=o,100<A.size){var u=Array.from(A.entries());u.sort((e,t)=>(e[1].lastUpdate||0)-(t[1].lastUpdate||0));for(let e=0;e<20;e++)A.delete(u[e][0])}}L.push({x:r,y:n,x_relative:0<s.width?parseFloat((r/s.width).toFixed(4)):0,y_relative:0<s.height?parseFloat((n/s.height).toFixed(4)):0,velocity:parseFloat(c.toFixed(2)),timestamp:a,attention_zone:t,element_selector:e.substring(0,200)}),(L=L.length>jt.MAX_BUFFER_SIZE?L.slice(-jt.MAX_BUFFER_SIZE):L).length>=jt.BATCH_SIZE?Yt():zt=zt||setTimeout(Yt,jt.FLUSH_INTERVAL_MS)}}function Yt(){var e,t,n;zt&&(clearTimeout(zt),zt=null),0!==L.length&&(e=function n(a,i){if(a.length<=2)return a;let o=0;let r=0;let s=a[0];let l=a[a.length-1];for(let t=1;t<a.length-1;t++){let e=Jt(a[t],s,l);e>o&&(o=e,r=t)}{if(o>i){let e=n(a.slice(0,r+1),i),t=n(a.slice(r),i);return e.slice(0,-1).concat(t)}return[s,l]}}(L,3),t=(t=>{if(t.length<2)return{totalDistance:0,directionChanges:0,avgVelocity:0,isErratic:!1};let n=0,a=0,i=0,o=null;for(let e=1;e<t.length;e++){var r=t[e].x-t[e-1].x,s=t[e].y-t[e-1].y,l=Math.sqrt(r*r+s*s);n+=l,i+=t[e].velocity||0,5<l&&(l=Math.atan2(s,r),null!==o&&(s=Math.abs(l-o))>Math.PI/4&&s<7*Math.PI/4&&a++,o=l)}var e=i/t.length,c=n>Vt.MIN_DISTANCE&&a/n>Vt.ERRATIC_THRESHOLD;return{totalDistance:parseFloat(n.toFixed(2)),directionChanges:a,avgVelocity:parseFloat(e.toFixed(2)),isErratic:c}})(L.splice(0,L.length)),n=I(),n={event_type:"mouse_move",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,cursor_path_distance:t.totalDistance,cursor_direction_changes:t.directionChanges,is_erratic_movement:t.isErratic,document_width:n.width,document_height:n.height,path_points:e.length,avg_velocity:t.avgVelocity,device_info:x()},v(d,n).catch(console.error))}let Vt={ERRATIC_THRESHOLD:.4,MIN_DISTANCE:100};function Jt(e,t,n){var a,i=n.x-t.x,n=n.y-t.y;return 0==i&&0==n?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):(a=((e.x-t.x)*i+(e.y-t.y)*n)/(i*i+n*n),n=t.y+a*n,Math.sqrt(Math.pow(e.x-(t.x+a*i),2)+Math.pow(e.y-n,2)))}let Zt=null,Gt=Date.now();function Kt(){Zt=setInterval(()=>{var e=Date.now();let n=[];if(A.forEach((e,t)=>{e.totalTime>=jt.MIN_HOVER_DURATION_MS&&n.push({element_selector:t.substring(0,200),hover_duration_ms:e.totalTime})}),0<n.length){var a=n;if(0!==a.length){let t=I();a.sort((e,t)=>t.hover_duration_ms-e.hover_duration_ms).slice(0,10).forEach(e=>{e={event_type:"hover",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:e.element_selector,hover_duration_ms:e.hover_duration_ms,document_width:t.width,document_height:t.height,device_info:x()};v(d,e).catch(console.error)})}}A.clear(),Gt=e},3e4)}function Qt(s){let l=s.target;if(l&&!l.closest("[data-navlens-ignore]")){ct();var c=gt(l);let t=vt(l),n=I(),a=Math.round(s.pageX),i=Math.round(s.pageY),o=0<n.width?parseFloat((a/n.width).toFixed(4)):0,r=0<n.height?parseFloat((i/n.height).toFixed(4)):0,e=l.innerText||l.textContent||"";e=f(e.substring(0,100).trim());s={event_type:"click",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:t,element_tag:l.tagName.toLowerCase(),element_id:l.id||null,element_class:"string"==typeof l.className?l.className:null,element_text:e,element_href:l.href||l.closest("a")?.href||null,x:a,y:i,click_x:Math.round(s.clientX),click_y:Math.round(s.clientY),page_x:a,page_y:i,x_relative:o,y_relative:r,document_width:n.width,document_height:n.height,element_position:c,is_interactive:ft(l),is_dead_click:!1,scroll_depth:C,device_info:x()};h(d,s),m("click",{element:l,selector:t}),(async n=>(wt=!1,new Promise(t=>{setTimeout(()=>{if(wt)t(!1);else{if(ft(n)){var e=n.tagName;if("A"===e&&n.href)return void t(!1);if(["INPUT","SELECT","TEXTAREA"].includes(e))return void t(!1)}ft(n)?t(!1):t(!0)}},300)})))(l).then(e=>{e&&(e={event_type:"dead_click",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:t,element_tag:l.tagName?.toLowerCase()||"",x:a,y:i,x_relative:o,y_relative:r,document_width:n.width,document_height:n.height,device_info:x()},v(d,e).catch(console.error))})}}function en(){var e={event_type:"page_view",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,page_title:document.title,referrer:document.referrer||null,device_info:x()};h(d,e)}let D=[],tn=3,nn=1e3,an=50;function on(e){var a,i,o,r,s,t=Date.now(),l=e.clientX,c=e.clientY;for(100<D.length&&D.splice(0,D.length-100),D.push({x:l,y:c,time:t});0<D.length&&t-D[0].time>nn;)D.shift();if(D.length>=tn){var l=D.slice(-tn);let t=l.reduce((e,t)=>e+t.x,0)/l.length,n=l.reduce((e,t)=>e+t.y,0)/l.length;l.every(e=>Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-n,2))<an)&&(console.log("[Navlens] Rage click detected!"),c=e,e=l.length,l=c.target,a=gt(l),i=vt(l),o=I(),r=Math.round(c.pageX),s=Math.round(c.pageY),i={event_type:"rage_click",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:i,element_tag:l.tagName.toLowerCase(),click_count:e,x:r,y:s,click_x:Math.round(c.clientX),click_y:Math.round(c.clientY),x_relative:0<o.width?parseFloat((r/o.width).toFixed(4)):0,y_relative:0<o.height?parseFloat((s/o.height).toFixed(4)):0,document_width:o.width,document_height:o.height,element_position:a,device_info:x()},v(d,i).catch(console.error),D.length=0)}}let rn=Date.now(),sn=0;function ln(){"visible"===document.visibilityState&&(sn+=Date.now()-rn),0<N.length&&(e=x(),e={site_id:c,session_id:E,visitor_id:ut,events:N,timestamp:(new Date).toISOString(),page_path:window.location.pathname,user_agent:navigator.userAgent,screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,referrer:document.referrer,device_type:e.device_type},e=new Blob([JSON.stringify(e)],{type:"application/json"}),navigator.sendBeacon($,e));var e={event_type:"session_end",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,max_scroll_depth:C,total_visible_time_ms:sn,device_info:x()};h(d,e),ke&&clearInterval(ke)}function cn(){if(U){if(console.log("[Navlens] Initializing tracker v5.2 (Enterprise Edition)"),_t||(_t=new MutationObserver(e=>{for(var t of e){if("childList"===t.type&&(0<t.addedNodes.length||0<t.removedNodes.length))return void(wt=!0);if("attributes"===t.type){t=t.attributeName;if(["class","style","data-loading","aria-expanded","aria-hidden"].includes(t))return void(wt=!0)}}})).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style","data-loading","aria-expanded","aria-hidden"]}),Dt(),document.addEventListener("visibilitychange",()=>{var e;"hidden"===document.visibilityState?(sn+=Date.now()-rn,e={event_type:"visibility_hidden",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,visible_time_ms:Date.now()-rn,total_visible_time_ms:sn,scroll_depth:C,device_info:x()},h(d,e)):(rn=Date.now(),ct())}),window.addEventListener("scroll",()=>{clearTimeout(Ht),Ht=setTimeout(Ut,50)},{passive:!0}),document.addEventListener("mousemove",Wt,{passive:!0}),document.addEventListener("mouseleave",()=>{qt=!1,Yt()}),Kt(),Ie(()=>{},"idle"),en(),document.addEventListener("click",e=>{Qt(e),on(e)},{passive:!0}),Ie(()=>{xt()},"idle"),setTimeout(()=>{Ie(async()=>{var e=await Mt();e&&(e.hash=mt(),Lt(e)),ht()},"idle")},5e3),window.addEventListener("beforeunload",ln),window.addEventListener("pagehide",ln),void 0!==window.history){let e=history.pushState,t=history.replaceState;history.pushState=function(){e.apply(this,arguments),en(),C=0,setTimeout(T,500)},history.replaceState=function(){t.apply(this,arguments),en()},window.addEventListener("popstate",()=>{en(),C=0,setTimeout(T,500)})}console.log("[Navlens] Tracker initialized successfully"),console.log("[Navlens] Features: VoC Widget ‚úì | Micro-Surveys ‚úì | Frustration ‚úì | Compression ‚úì | PII Scrubbing ‚úì | Dead Click ‚úì | Hover ‚úì | Cursor Paths ‚úì")}else console.error("[Navlens] No API key provided. Add data-api-key attribute to the script tag.")}window.Navlens={version:"7.0.0",sessionId:E,track:(e,t={})=>{e={event_type:"custom",event_name:e,event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,properties:r(t),device_info:x()};v(d,e).catch(console.error)},identify:(e,t={})=>{e={event_type:"identify",event_id:k(),session_id:E,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,user_id:f(String(e)),traits:r(t),device_info:x()};v(d,e).catch(console.error)},captureSnapshot:async()=>{var e=await Mt();return e&&(e.hash=mt(),await Lt(e)),e},getSession:()=>({sessionId:E,scrollDepth:C,isRecording:bt,totalVisibleTime:sn,domHash:n}),refreshSession:()=>{var e={id:E=dt(),createdAt:Date.now(),lastActivity:Date.now()};return localStorage.setItem(i,JSON.stringify(e)),window.Navlens.sessionId=E},checkDomChanges:()=>{T()},getDomHash:()=>mt(),getSessionId:()=>E,getVisitorId:()=>ut,setContext:(e={})=>{"object"==typeof e&&(window.__navlens_context={...window.__navlens_context||{},...e})},scrubPII:f,scrubObjectPII:r},window.navlens=window.Navlens;let O={enabled:!0,position:"bottom-right",primaryColor:"#3B82F6",showOnScroll:50,showAfterTime:3e4,allowDismiss:!0,collectIntent:!0,collectIssues:!0,showExitIntent:!0,showFrustrationSurvey:!0},dn=[{value:1,emoji:"üò°",label:"Very Bad"},{value:2,emoji:"üòû",label:"Bad"},{value:3,emoji:"üòê",label:"Okay"},{value:4,emoji:"üòä",label:"Good"},{value:5,emoji:"üòç",label:"Excellent"}],un=[{code:"cant_find",label:"Couldn't find what I need",icon:"üîç"},{code:"confusing",label:"Confusing navigation",icon:"üß≠"},{code:"slow",label:"Page too slow",icon:"‚è≥"},{code:"broken",label:"Something broken",icon:"üîß"},{code:"pricing",label:"Pricing unclear",icon:"üí∞"},{code:"other",label:"Other issue",icon:"‚ùì"}],pn=[{code:"buy",label:"Buy",icon:"üõí"},{code:"learn",label:"Learn",icon:"üìö"},{code:"compare",label:"Compare",icon:"‚öñÔ∏è"},{code:"support",label:"Get Help",icon:"üí¨"},{code:"browse",label:"Just Browsing",icon:"üëÄ"}],F=null,mn=!1,hn=!1,vn=!1;function gn(){var e=document.createElement("button");e.className="navlens-feedback-btn "+O.position,e.style.backgroundColor=O.primaryColor,e.innerHTML=`
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
      <span>Feedback</span>
    `,e.onclick=fn,document.body.appendChild(e),F=e}function fn(){if(!mn){mn=!0,F&&F.classList.add("navlens-hidden");let t=document.createElement("div"),i=(t.id="navlens-feedback-modal",t.className="navlens-feedback-modal","rating"),o=null,r=[],s=null,l="";t.innerHTML=`
      <div class="navlens-feedback-backdrop"></div>
      <div class="navlens-feedback-content">
        <div class="navlens-feedback-header">
          <h2 class="navlens-feedback-title">Share Your Feedback</h2>
          <button class="navlens-feedback-close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div class="navlens-feedback-body"></div>
        ${O.allowDismiss?`
        <div class="navlens-footer">
          <button class="navlens-dismiss-btn">Don't show again on this page</button>
        </div>
        `:""}
      </div>
    `,document.body.appendChild(t),t.querySelector(".navlens-feedback-backdrop").onclick=wn,t.querySelector(".navlens-feedback-close").onclick=wn,O.allowDismiss&&(t.querySelector(".navlens-dismiss-btn").onclick=()=>{hn=!0,sessionStorage.setItem("navlens_feedback_dismissed","true"),wn()}),!function a(){var e=t.querySelector(".navlens-feedback-body");e&&("rating"===i?(e.innerHTML=`
          <p class="navlens-feedback-step-title">How would you rate your experience?</p>
          <div class="navlens-rating-group">
            ${dn.map(e=>`
              <button class="navlens-rating-btn ${o===e.value?"selected":""}" 
                      data-rating="${e.value}" title="${e.label}">
                ${e.emoji}
              </button>
            `).join("")}
          </div>
        `,e.querySelectorAll(".navlens-rating-btn").forEach(e=>{e.onclick=()=>{o=parseInt(e.dataset.rating),i=O.collectIssues&&o<=3?"issues":O.collectIntent?"intent":"message",a()}})):"issues"===i?(e.innerHTML=`
          <p class="navlens-feedback-step-title">What went wrong?</p>
          <div class="navlens-options-grid">
            ${un.map(e=>`
              <button class="navlens-option-btn ${r.includes(e.code)?"selected":""}" 
                      data-issue="${e.code}">
                <span class="navlens-option-icon">${e.icon}</span>
                <span>${e.label}</span>
              </button>
            `).join("")}
          </div>
          <button class="navlens-submit-btn" ${0===r.length?"disabled":""}>Continue</button>
          <button class="navlens-skip-btn">Skip</button>
        `,e.querySelectorAll(".navlens-option-btn").forEach(e=>{e.onclick=()=>{let t=e.dataset.issue;r.includes(t)?r=r.filter(e=>e!==t):r.push(t),a()}}),e.querySelector(".navlens-submit-btn").onclick=()=>{i=O.collectIntent?"intent":"message",a()},e.querySelector(".navlens-skip-btn").onclick=()=>{i=O.collectIntent?"intent":"message",a()}):"intent"===i?(e.innerHTML=`
          <p class="navlens-feedback-step-title">What brought you here today?</p>
          <div class="navlens-options-grid">
            ${pn.map(e=>`
              <button class="navlens-option-btn ${s===e.code?"selected":""}" 
                      data-intent="${e.code}">
                <span class="navlens-option-icon">${e.icon}</span>
                <span>${e.label}</span>
              </button>
            `).join("")}
          </div>
          <button class="navlens-submit-btn" ${s?"":"disabled"}>Continue</button>
          <button class="navlens-skip-btn">Skip</button>
        `,e.querySelectorAll(".navlens-option-btn").forEach(e=>{e.onclick=()=>{s=e.dataset.intent,a()}}),e.querySelector(".navlens-submit-btn").onclick=()=>{i="message",a()},e.querySelector(".navlens-skip-btn").onclick=()=>{i="message",a()}):"message"===i?(e.innerHTML=`
          <p class="navlens-feedback-step-title">Any additional feedback? (optional)</p>
          <textarea class="navlens-textarea" rows="4" placeholder="Tell us more about your experience..."></textarea>
          <button class="navlens-submit-btn">Submit Feedback</button>
        `,e.querySelector(".navlens-textarea").oninput=e=>{l=e.target.value},e.querySelector(".navlens-submit-btn").onclick=async e=>{let t=e.target,n=t.textContent;t.textContent="Sending...",t.disabled=!0,t.style.opacity="0.7",t.style.cursor="wait",await(async e=>{e={siteId:c,sessionId:E,rating:e.selectedRating,intent:e.selectedIntent,issues:e.selectedIssues,message:f(e.feedbackMessage||""),pagePath:window.location.pathname,pageUrl:window.location.href,deviceType:pt(),userAgent:navigator.userAgent,surveyType:"manual",timestamp:(new Date).toISOString()};try{return await g(X,e,!1),console.log("[Navlens] Feedback submitted successfully"),!0}catch(e){return console.warn("[Navlens] Failed to submit feedback:",e.message),!1}})({selectedRating:o,selectedIssues:r,selectedIntent:s,feedbackMessage:l})?(i="success",a()):(t.textContent="Failed. Try Again",t.disabled=!1,t.style.opacity="1",t.style.cursor="pointer",setTimeout(()=>{t.textContent=n},3e3))}):"success"===i&&(vn=!0,e.innerHTML=`
          <div class="navlens-success">
            <div class="navlens-success-icon">üéâ</div>
            <h3 class="navlens-success-title">Thank You!</h3>
            <p class="navlens-success-text">Your feedback helps us improve.</p>
          </div>
        `,setTimeout(()=>{wn()},2e3)))}()}}function wn(){var e=document.getElementById("navlens-feedback-modal");e&&e.remove(),mn=!1,!F||hn||vn||F.classList.remove("navlens-hidden")}async function _n(){if(c)if(p)O={...O,enabled:p.enabled??!0,position:p.position||"bottom-right",primaryColor:p.primaryColor||"#3B82F6",allowDismiss:p.allowDismiss??!0,showExitIntent:p.showExitIntent??!0,showFrustrationSurvey:p.showFrustrationSurvey??!0,showAfterTime:1e3*(p.minTimeBeforeSurvey||30),showOnScroll:p.showOnScroll||50,collectIntent:p.collectIntent??!0,collectIssues:p.collectIssues??!0},console.log("[Navlens] Feedback config loaded from merged endpoint");else try{var e,n=await fetch(W+"?siteId="+c,{method:"GET",headers:{Accept:"application/json"}});n.ok&&(e=await n.json()).config&&(O={...O,enabled:e.config.enabled??!0,position:e.config.position||"bottom-right",primaryColor:e.config.primaryColor||"#3B82F6",allowDismiss:e.config.allowDismiss??!0,showExitIntent:e.config.showExitIntent??!0,showFrustrationSurvey:e.config.showFrustrationSurvey??!0,showAfterTime:1e3*(e.config.minTimeBeforeSurvey||30),showOnScroll:e.config.showOnScroll||50,collectIntent:e.config.collectIntent??!0,collectIssues:e.config.collectIssues??!0},console.log("[Navlens] Feedback config loaded from dashboard"))}catch(e){console.warn("[Navlens] Failed to fetch feedback config, using defaults:",e.message)}if(await 0,O.enabled)if("true"===sessionStorage.getItem("navlens_feedback_dismissed"))hn=!0;else{document.getElementById("navlens-feedback-styles")||((n=document.createElement("link")).id="navlens-feedback-styles",n.rel="stylesheet",n.href=a+"/navlens-feedback.css",document.head.appendChild(n));let t=()=>{F&&(F.style.backgroundColor=O.primaryColor)},e=!1;setTimeout(()=>{F||hn||vn||(gn(),t())},O.showAfterTime),window.addEventListener("scroll",function(){e||hn||vn||window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100>=O.showOnScroll&&(e=!0,gn(),t())},{passive:!0}),O.showExitIntent&&document.addEventListener("mouseleave",e=>{!(e.clientY<0)||mn||hn||vn||F||(gn(),t())},{once:!0})}}if(!j){let e=se().catch(e=>{console.warn("[Navlens] Experiment init failed:",e);e=document.getElementById(P);e&&e.remove()});"loading"===document.readyState?document.addEventListener("DOMContentLoaded",async()=>{await e,cn(),_n()}):e.then(()=>{cn(),_n()})}let R={lcp:null,cls:0,fid:null,inp:null,fcp:null,ttfb:null},yn=0,bn=0,Sn=null,kn=null,En=null;function xn(){if(!He){He=!0;var e={type:"web_vitals",timestamp:(new Date).toISOString(),session_id:E,page_url:window.location.href,page_path:window.location.pathname,lcp_ms:Math.round(bn),cls:yn.toFixed(4),fid_ms:Sn?Math.round(Sn):null,inp_ms:R.inp?Math.round(R.inp):null,fcp_ms:kn?Math.round(kn):null,ttfb_ms:En?Math.round(En):null};console.log("[Navlens] Sending Web Vitals:",e);try{var t=ye(e);g(d,t,!1)}catch(e){console.warn("[Navlens] Failed to send Web Vitals:",e)}}}function In(){try{if("PerformanceObserver"in window){try{new PerformanceObserver(e=>{var e=e.getEntries();0<e.length&&(e=e[e.length-1],bn=e.startTime,R.lcp=bn)}).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{for(var t of e.getEntries())t.hadRecentInput||(yn+=t.value,R.cls=yn)}).observe({type:"layout-shift",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{e=e.getEntries();0<e.length&&null===Sn&&(Sn=e[0].processingStart-e[0].startTime,R.fid=Sn)}).observe({type:"first-input",buffered:!0})}catch(e){}try{let n=0;new PerformanceObserver(e=>{for(var t of e.getEntries()){t=t.duration;t>n&&(n=t,R.inp=n)}}).observe({type:"event",buffered:!0,durationThreshold:16})}catch(e){}}try{var e=performance.getEntriesByType("paint").find(e=>"first-contentful-paint"===e.name);e&&(kn=e.startTime,R.fcp=kn)}catch(e){}try{var t=performance.getEntriesByType("navigation")[0];t&&(En=t.responseStart-t.requestStart,R.ttfb=En)}catch(e){}window.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&xn()}),window.addEventListener("pagehide",xn),setTimeout(xn,1e4)}catch(e){console.warn("[Navlens] Web Vitals initialization failed:",e)}}j||("complete"===document.readyState?In():window.addEventListener("load",In));let Tn="navlens_consent_status",Nn="1.0";function Cn(){if(!j){try{var e=localStorage.getItem(Tn);if(e){var t=JSON.parse(e);if(t.version===Nn&&t.responded)return void console.log("[Navlens] Consent already recorded:",t.status)}}catch(e){}e=document.createElement("div");e.id="navlens-consent-banner",e.innerHTML=`
      <style>
        #navlens-consent-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
          color: #f8fafc;
          padding: 16px 24px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 16px;
          z-index: 999999;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
          font-size: 14px;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
          animation: navlens-slide-up 0.4s ease-out;
        }
        
        @keyframes navlens-slide-up {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        
        #navlens-consent-banner .navlens-banner-content {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }
        
        #navlens-consent-banner .navlens-banner-icon {
          width: 32px;
          height: 32px;
          background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }
        
        #navlens-consent-banner .navlens-banner-icon svg {
          width: 18px;
          height: 18px;
          fill: white;
        }
        
        #navlens-consent-banner .navlens-banner-text {
          line-height: 1.5;
        }
        
        #navlens-consent-banner .navlens-banner-text strong {
          color: #93c5fd;
        }
        
        #navlens-consent-banner .navlens-banner-text a {
          color: #93c5fd;
          text-decoration: underline;
          cursor: pointer;
        }
        
        #navlens-consent-banner .navlens-banner-buttons {
          display: flex;
          gap: 10px;
          flex-shrink: 0;
        }
        
        #navlens-consent-banner button {
          padding: 10px 20px;
          border-radius: 8px;
          border: none;
          cursor: pointer;
          font-weight: 600;
          font-size: 13px;
          transition: all 0.2s ease;
          font-family: inherit;
        }
        
        #navlens-consent-banner .navlens-accept-btn {
          background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
          color: white;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }
        
        #navlens-consent-banner .navlens-accept-btn:hover {
          background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.5);
        }
        
        #navlens-consent-banner .navlens-customize-btn {
          background: rgba(255, 255, 255, 0.1);
          color: #e2e8f0;
          border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        #navlens-consent-banner .navlens-customize-btn:hover {
          background: rgba(255, 255, 255, 0.15);
          border-color: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 640px) {
          #navlens-consent-banner {
            flex-direction: column;
            padding: 16px;
            text-align: center;
          }
          
          #navlens-consent-banner .navlens-banner-content {
            flex-direction: column;
          }
          
          #navlens-consent-banner .navlens-banner-buttons {
            width: 100%;
            justify-content: center;
          }
        }
      </style>
      
      <div class="navlens-banner-content">
        <div class="navlens-banner-icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
          </svg>
        </div>
        <div class="navlens-banner-text">
          üç™ This site uses <strong>Navlens</strong> to analyze visitor behavior and improve user experience. 
          We collect anonymous interaction data to optimize this website.
          <a href="https://navlens.io/privacy" target="_blank" rel="noopener">Learn more</a>
        </div>
      </div>
      
      <div class="navlens-banner-buttons">
        <button class="navlens-customize-btn" id="navlens-customize">Customize</button>
        <button class="navlens-accept-btn" id="navlens-accept">Accept All</button>
      </div>
    `,document.body.appendChild(e),document.getElementById("navlens-accept").addEventListener("click",()=>{Mn("accepted"),Ln()}),document.getElementById("navlens-customize").addEventListener("click",()=>{console.log("[Navlens] Customize preferences clicked - functionality coming soon"),Mn("customized"),Ln()})}}function Mn(e){try{localStorage.setItem(Tn,JSON.stringify({version:Nn,status:e,responded:!0,timestamp:(new Date).toISOString()})),console.log("[Navlens] Consent saved:",e)}catch(e){console.warn("[Navlens] Could not save consent to localStorage")}}function Ln(){let e=document.getElementById("navlens-consent-banner");e&&(e.style.animation="navlens-slide-down 0.3s ease-in forwards",e.style.cssText+=`
        @keyframes navlens-slide-down {
          to {
            transform: translateY(100%);
            opacity: 0;
          }
        }
      `,setTimeout(()=>e.remove(),300))}window.Navlens=window.Navlens||{},window.Navlens.consent={show:Cn,hide:Ln,getStatus:()=>{try{var e=localStorage.getItem(Tn);return e?JSON.parse(e):null}catch(e){return null}},reset:()=>{try{localStorage.removeItem(Tn),console.log("[Navlens] Consent reset")}catch(e){}}},j||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(Cn,1500)}):setTimeout(Cn,1500)),console.log("[Navlens] Tracker initialized. Use navlens.track() for custom events.")})();