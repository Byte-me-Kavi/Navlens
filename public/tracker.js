!function(){"use strict";const t="navlens-anti-flicker";try{if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent="html { visibility: hidden !important; opacity: 0 !important; }",document.head.appendChild(e),setTimeout(()=>{const e=document.getElementById(t);e&&(e.remove(),console.warn("[Navlens] Anti-flicker timed out - showing content"))},500)}}catch(e){}const n=document.currentScript,o=n?.dataset?.apiKey||"",i=n?.dataset?.siteId||"",a=n?.dataset?.apiHost||"https://navlens-rho.vercel.app",s=new URLSearchParams(window.location.search).has("__navlens_editor");s&&console.log("[Navlens] Editor mode detected - tracking disabled"),i||console.warn("[Navlens] Missing data-site-id attribute. Tracker will not work."),o||console.warn("[Navlens] Missing data-api-key attribute. Tracker will not work.");const r=a.includes("://")?a:`https://${a}`,c=`${r}/api/v1/ingest`,l=c,d=`${r}/api/rrweb-events`,u=`${r}/api/dom-snapshot`,p=`${r}/api/v1/debug-events`,h=`${r}/api/v1/form-events`,m=`${r}/api/feedback`,f=`${r}/api/feedback-config`,g=`${r}/api/v1/batch`,v=`${r}/api/tracker-config`;let w=!0,_=null;try{const e=document.currentScript,t=e?.dataset?.siteId||"",n=e?.dataset?.apiHost||"https://navlens-rho.vercel.app",o=n.includes("://")?n:`https://${n}`;t&&(_=fetch(`${o}/api/tracker-config?siteId=${t}`,{priority:"high",cache:"default"}).then(e=>e.ok?e.json():null).catch(()=>null))}catch(e){}let y={},b=null,k=null;function S(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}let x=null;async function E(){try{const e=await fetch(`${v}?siteId=${i}`,{priority:"high",cache:"default"});if(e.ok){const t=await e.json();return t.feedback&&(x=t.feedback,console.log("[Navlens] Merged config loaded (experiments + feedback)")),t}}catch(t){console.warn("[navlens] Merged config failed, trying individual:",e.message)}try{const e=await fetch(`${r}/api/experiments/config?siteId=${i}`,{priority:"high",cache:"default"});return e.ok?await e.json():null}catch(t){return console.warn("[navlens] Config fetch failed:",e),null}}function I(t,n){if(t.dataset.nvApplied===n.id)return;const o=n.changes||{};try{switch(n.type){case"css":o.css&&Object.assign(t.style,o.css);break;case"text":void 0!==o.text&&(t.textContent=o.text);break;case"hide":t.style.display="none";break;case"remove":t.remove();break;case"clone":const n=o.cloneCount||1,i=o.clonePosition||"after";for(let e=0;e<n;e++){const e=t.cloneNode(!0);e.removeAttribute("id"),e.removeAttribute("data-nv-applied"),"before"===i?t.parentNode.insertBefore(e,t):t.parentNode.insertBefore(e,t.nextSibling)}break;case"image":if(o.imageUrl){const e=e=>{e.dataset.nvImgUrl!==o.imageUrl&&(e.removeAttribute("srcset"),e.removeAttribute("data-srcset"),e.src=o.imageUrl,e.style.cssText+=`content: url(${o.imageUrl}) !important; object-fit: cover !important;`,e.dataset.nvImgUrl=o.imageUrl)};"IMG"===t.tagName?e(t):t.querySelectorAll("img").forEach(e)}break;case"link":"A"===t.tagName&&(o.linkUrl&&(t.href=o.linkUrl),o.linkTarget&&(t.target=o.linkTarget));break;case"insertHtml":if(o.html){const e=o.html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),n=o.insertPosition||"after";t.insertAdjacentHTML("before"===n?"beforebegin":"after"===n?"afterend":"prepend"===n?"afterbegin":"beforeend",e)}break;case"replaceHtml":if(o.html){const e=o.html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");t.outerHTML=e}break;case"resize":o.width&&(t.style.width=o.width),o.height&&(t.style.height=o.height);break;case"dragMove":if(o.targetSelector&&o.position)try{const e=document.querySelector(o.targetSelector);e&&e.parentNode&&("before"===o.position?e.parentNode.insertBefore(t,e):e.parentNode.insertBefore(t,e.nextSibling))}catch(t){console.warn("[navlens] Failed to replay dragMove:",e)}break;case"reorder":if("number"==typeof o.newIndex){const e=t.parentNode,n=Array.from(e.children),i=n[Math.min(o.newIndex,n.length-1)];i&&i!==t&&e.insertBefore(t,i)}break;case"move":o.position&&(t.style.transform=`translate(${o.position.x||0}px, ${o.position.y||0}px)`);break;case"attribute":o.attributes&&Object.entries(o.attributes).forEach(([e,n])=>{e.toLowerCase().startsWith("on")||t.setAttribute(e,n)});break;case"class":o.addClass&&Array.isArray(o.addClass)&&o.addClass.forEach(e=>{e&&"string"==typeof e&&t.classList.add(e)}),o.removeClass&&Array.isArray(o.removeClass)&&o.removeClass.forEach(e=>{e&&"string"==typeof e&&t.classList.remove(e)});break;case"clickRedirect":o.redirectUrl&&(t.style.cursor="pointer",t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),window.location.href=o.redirectUrl},{once:!1}));break;case"tooltip":o.tooltipText&&(t.title=o.tooltipText);break;case"sticky":t.style.position="sticky",t.style.top=o.stickyTop||"0px",t.style.zIndex=o.stickyZIndex||1e3;break;case"placeholder":void 0===o.placeholderText||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||(t.placeholder=o.placeholderText);break;case"formAction":o.formActionUrl&&"FORM"===t.tagName&&(t.action=o.formActionUrl);break;case"animation":if(o.animationName){const e=o.animationDuration||"0.5s";if(!document.getElementById("nv-animation-styles")){const e=document.createElement("style");e.id="nv-animation-styles",e.textContent="\n                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n                @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }\n                @keyframes slideInLeft { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n                @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }\n                @keyframes slideInUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n                @keyframes slideInDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n                @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-20px); } 60% { transform: translateY(-10px); } }\n                @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }\n                @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }\n              ",document.head.appendChild(e)}if("custom"===o.animationName&&o.animationCustom)t.style.transition=`all ${e}`,o.animationCustom.split(";").forEach(e=>{const[n,o]=e.split(":").map(e=>e.trim());if(n&&o){const e=n.replace(/-([a-z])/g,e=>e[1].toUpperCase());t.style[e]=o}});else{const n=o.animationIteration||"1",i=o.animationDelay||"0s";t.style.animation=`${o.animationName} ${e} ${i} ${n}`}}break;case"html":o.html&&(t.innerHTML=o.html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""))}t.dataset.nvApplied=n.id}catch(t){console.warn("[navlens] Failed to apply modification:",n.type,e)}}function T(t){function n(e){return e.replace(/\.([a-z0-9-]+):([a-z0-9-]+)/gi,".$1\\:$2")}t?.length&&new Promise(e=>{const t=()=>{requestAnimationFrame(()=>{queueMicrotask(()=>{setTimeout(e,50)})})};"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t,{once:!0})}).then(()=>{t.forEach(t=>{try{const e=n(t.selector);document.querySelectorAll(e).forEach(e=>I(e,t))}catch(n){console.warn("[navlens] Invalid selector:",t.selector,e)}}),k&&k.disconnect(),k=new MutationObserver(()=>{t.forEach(e=>{try{const t=n(e.selector);document.querySelectorAll(t).forEach(t=>{t.dataset.nvApplied!==e.id&&I(t,e)})}catch(e){}})}),k.observe(document.documentElement,{childList:!0,subtree:!0})})}function N(e,t){if(!e?.experiments?.length)return[];const n=[];e.experiments.forEach(e=>{const o=e.v||[];if(!o.length)return;const i=(e.t||100)/100;if(S(`${t}-${e.id}-traffic`)/4294967295>i)return;const a=function(e,t,n){const o=S(`${e}-${t}`),i=o/4294967296;let a=0;for(let e=0;e<n.length;e++)a+=void 0!==n[e].weight?n[e].weight:50;if(a<=0)return o%n.length;let s=i*a,r=0;for(let e=0;e<n.length;e++)if(r+=void 0!==n[e].weight?n[e].weight:50,s<r)return e;return n.length-1}(t,e.id,o),s=o[a];if(s){y[e.id]=s.id;const t=(e.m||[]).filter(e=>e.variant_id===s.id);n.push(...t)}}),window.__NAVLENS_EXPERIMENTS={...y};const o=new Date(Date.now()+2592e6).toUTCString();return document.cookie=`navlens_exp=${encodeURIComponent(JSON.stringify(y))}; expires=${o}; path=/; SameSite=Lax`,n}async function C(){const e=performance.now();let n=document.cookie.match(/navlens_visitor=([^;]+)/)?.[1];if(!n){n="v_"+Math.random().toString(36).substr(2,9);const e=new Date(Date.now()+31536e6).toUTCString();document.cookie=`navlens_visitor=${n}; expires=${e}; path=/; SameSite=Lax`}const o=document.cookie.match(/navlens_exp=([^;]+)/)?.[1];if(o)try{Object.assign(y,JSON.parse(decodeURIComponent(o)))}catch(e){}let i=null,a=!1;try{const e=localStorage.getItem("navlens_config");if(e){const t=JSON.parse(e);t.data?.feedback?(i=t.data,x=i.feedback,a=Date.now()-t.timestamp>3e5,console.log("[Navlens] Using cached config (stale-while-revalidate)")):t.data&&!t.data.feedback&&localStorage.removeItem("navlens_config")}}catch(e){}if(i)a&&E().then(e=>{if(e)try{localStorage.setItem("navlens_config",JSON.stringify({data:e,timestamp:Date.now()}))}catch(e){}});else{const e=_||E();i=await Promise.race([e.then(e=>{if(e)try{localStorage.setItem("navlens_config",JSON.stringify({data:e,timestamp:Date.now()})),e.feedback&&(x=e.feedback)}catch(e){}return e}),new Promise(e=>setTimeout(()=>e(null),500))])}if(i){b=i;const e=N(i,n);e.length&&T(e),setTimeout(()=>{$("pageview",{url:window.location.href,path:window.location.pathname})},100)}const s=document.getElementById(t);s&&s.remove(),"hidden"===document.documentElement.style.visibility&&(document.documentElement.style.visibility="");const r=performance.now()-e;r>100&&console.log(`[navlens] Experiments loaded in ${r.toFixed(0)}ms`)}function M(){return window.__NAVLENS_EXPERIMENTS&&"object"==typeof window.__NAVLENS_EXPERIMENTS&&(y={...y,...window.__NAVLENS_EXPERIMENTS}),y}const L=new Set;function D(e,t,n){if(!t)return!0;const o=e.split("?")[0].split("#")[0].replace(/\/$/,"")||"/",i=t.split("?")[0].split("#")[0].replace(/\/$/,"")||"/";let a=o;try{o.startsWith("http")&&(a=new URL(o).pathname.replace(/\/$/,"")||"/")}catch(e){a=o.replace(/^https?:\/\/[^\/]+/,"").replace(/\/$/,"")||"/"}switch(n){case"exact":return a===i||o===i;case"contains":return a.includes(t)||o.includes(t);case"regex":try{return new RegExp(t).test(a)||new RegExp(t).test(e)}catch{return!1}default:return a.includes(t)}}function A(e,t,n){switch(e.type){case"click":if("click"!==t)return!1;if(e.selector&&n.element)try{return n.element.matches(e.selector)||null!==n.element.closest(e.selector)}catch{return!1}return e.url_pattern?D(window.location.href,e.url_pattern,e.url_match||"contains"):!e.selector;case"pageview":if("pageview"!==t)return!1;const o=D(window.location.href,e.url_pattern,e.url_match||"contains");return o;case"form_submit":if("form_submit"!==t&&"submit"!==t)return!1;if(e.selector&&n.element)try{return n.element.matches(e.selector)||null!==n.element.closest(e.selector)}catch{return!1}return!0;case"custom_event":case"revenue":return t===e.event_name;case"scroll_depth":if("scroll_depth"!==t)return!1;const i=e.depth_percentage||50;return(n.depth||0)>=i;case"time_on_page":if("time_threshold"!==t)return!1;const a=e.seconds||30;return(n.seconds||0)>=a;default:return!1}}function O(e,t,n,o){const i=`${e}:${n.id}`;if(L.has(i))return;L.add(i);const a={event_type:"experiment_goal",experiment_id:e,variant_id:t,goal_id:n.id,goal_type:n.type,goal_name:n.name,is_primary:n.is_primary,timestamp:Date.now(),page_path:window.location.pathname};if("revenue"===n.type&&n.track_value&&n.value_field){const e=o.properties?.[n.value_field]||o[n.value_field];"number"==typeof e&&(a.revenue_value=e,a.currency=n.currency||"USD")}X(l,a)}function $(e,t){if(b?.experiments)for(const n of b.experiments){const o=y[n.id];if(!o)continue;const i=n.g||n.goal_event,a=n.goals||(i?[{id:"legacy_goal",name:i,type:"custom_event",event_name:i,is_primary:!0}]:[]);for(const i of a)A(i,e,t)&&O(n.id,o,i,t)}}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{$("pageview",{})},100)});const F=[25,50,75,90,100];let P=new Set;window.addEventListener("scroll",()=>{const e=document.documentElement.scrollHeight-window.innerHeight;if(e<=0)return;const t=Math.round(window.scrollY/e*100);if(t>mt){mt=t;for(const e of F)t>=e&&!P.has(e)&&(P.add(e),$("scroll_depth",{depth:e}))}},{passive:!0});let R=Date.now();const j=[15,30,60,120,300];let U=new Set;setInterval(()=>{const e=Math.floor((Date.now()-R)/1e3);for(const t of j)e>=t&&!U.has(t)&&(U.add(t),$("time_threshold",{seconds:t}))},5e3),document.addEventListener("click",e=>{const t=e.target;var n;t&&(n=t,!n.closest?.("[data-navlens-ignore]"))&&$("click",{element:t,selector:t.tagName?.toLowerCase()})},!0),document.addEventListener("submit",e=>{const t=e.target;t&&$("form_submit",{element:t,formId:t.id,formAction:t.action})},!0);const H=history.pushState,B=history.replaceState;function q(){setTimeout(()=>{$("pageview",{url:window.location.href,path:window.location.pathname}),window.navlens&&window.navlens.getExperiments&&window.navlens.getExperiments()},100)}if(history.pushState=function(){H.apply(this,arguments),q()},history.replaceState=function(){B.apply(this,arguments),q()},window.addEventListener("popstate",q),window.navlens=window.navlens||{},window.navlens.setExperiment=function(e,t){y[e]=t,window.__NAVLENS_EXPERIMENTS={...M()}},window.navlens.getExperiments=M,window.navlens.reloadExperiments=C,window.navlens.track=function(e,t={}){$(e,{properties:t}),X(l,{event_type:e,properties:t,timestamp:Date.now(),page_path:window.location.pathname})},window.navlens.trackRevenue=function(e,t,n={}){$(e,{properties:{...n,amount:t,value:t},amount:t}),X(l,{event_type:e,revenue:t,properties:n,timestamp:Date.now(),page_path:window.location.pathname})},C(),new URLSearchParams(window.location.search).has("__navlens_editor")){const e=document.createElement("script");e.src=`${r}/ab-editor.js`,e.async=!0,document.head.appendChild(e)}function z(e){const t={...e};t.event_type&&(t.type=t.event_type,delete t.event_type),t.timestamp||(t.timestamp=(new Date).toISOString()),t.session_id||(t.session_id=ze);const n=t.device_info||We(),a={type:t.type,timestamp:t.timestamp,session_id:t.session_id,user_id:t.user_id||null,page_url:t.page_url||window.location.href,page_path:t.page_path||window.location.pathname,referrer:t.referrer||document.referrer||"",user_agent:n.user_agent||navigator.userAgent,user_language:n.language||navigator.language,viewport_width:n.viewport_width||window.innerWidth,viewport_height:n.viewport_height||window.innerHeight,screen_width:n.screen_width||screen.width,screen_height:n.screen_height||screen.height,device_type:n.device_type||Ve(),client_id:t.client_id||o,load_time:t.load_time||0,experiment_ids:Object.keys(M()),variant_ids:Object.values(M()),data:{event_id:t.event_id,element_selector:t.element_selector,element_tag:t.element_tag,element_id:t.element_id,element_classes:t.element_class,element_text:t.element_text,element_href:t.element_href,x:t.x,y:t.y,click_x:t.click_x,click_y:t.click_y,page_x:t.page_x,page_y:t.page_y,x_relative:t.x_relative,y_relative:t.y_relative,document_width:t.document_width,document_height:t.document_height,element_position:t.element_position,is_interactive:t.is_interactive,is_dead_click:t.is_dead_click,scroll_depth:t.scroll_depth,max_scroll_depth:t.max_scroll_depth,click_count:t.click_count,visible_time_ms:t.visible_time_ms,total_visible_time_ms:t.total_visible_time_ms,page_title:t.page_title,event_name:t.event_name,properties:t.properties,traits:t.traits}};return Object.keys(a.data).forEach(e=>{void 0===a.data[e]&&delete a.data[e]}),{events:[a],siteId:i}}function X(e,t){const n=z(t),o=new Blob([JSON.stringify(n)],{type:"application/json"});return navigator.sendBeacon?navigator.sendBeacon(e,o):(fetch(e,{method:"POST",body:o,keepalive:!0}).catch(console.error),!0)}async function Y(e,t){return ce(e,z(t))}const V="navlens_session",W="navlens_visitor";let J=null,G=null;const Z=[];let K=!1;function Q(e,t="idle"){return new Promise((n,o)=>{const i={task:e,priority:t,resolve:n,reject:o,timestamp:Date.now()};"high"===t?Z.unshift(i):Z.push(i),K||function(){if(0===Z.length)return void(K=!1);K=!0;const e=t=>{for(;Z.length>0&&(t?.timeRemaining?.()>0||!t);){const e=performance.now(),t=Z.shift();try{const e=t.task();e instanceof Promise?e.then(t.resolve).catch(t.reject):t.resolve(e)}catch(e){t.reject(e)}if(performance.now()-e>16)break}Z.length>0?"undefined"!=typeof requestIdleCallback?requestIdleCallback(e,{timeout:100}):setTimeout(()=>e(null),0):K=!1};"undefined"!=typeof requestIdleCallback?requestIdleCallback(e,{timeout:100}):setTimeout(()=>e(null),0)}()})}async function ee(e){const t="string"==typeof e?e:JSON.stringify(e),n=(new TextEncoder).encode(t);if("undefined"==typeof CompressionStream)return new Blob([n],{type:"application/json"});try{const e=new ReadableStream({start(e){e.enqueue(n),e.close()}}),t=e.pipeThrough(new CompressionStream("gzip")).getReader(),o=[];for(;;){const{done:e,value:n}=await t.read();if(e)break;o.push(n)}const i=o.reduce((e,t)=>e+t.length,0),a=new Uint8Array(i);let s=0;for(const e of o)a.set(e,s),s+=e.length;return new Blob([a],{type:"application/gzip"})}catch(e){return console.warn("[Navlens] Compression failed, sending uncompressed:",e),new Blob([n],{type:"application/json"})}}const te=[],ne=3,oe=5e3;let ie=null;function ae(e,t,n=0){n>=ne?console.warn("[Navlens] Max retries reached, dropping event"):(te.push({url:e,payload:t,retryCount:n}),se())}function se(){ie||(ie=setTimeout(re,oe))}async function re(){if(ie=null,0===te.length)return;const e=te.splice(0,5);for(const t of e)try{await ce(t.url,t.payload,!1)}catch(e){ae(t.url,t.payload,t.retryCount+1)}te.length>0&&se()}async function ce(e,t,n=!0){const i=await ee(t),a="application/gzip"===i.type,s={"x-api-key":o};a?(s["Content-Encoding"]="gzip",s["Content-Type"]="application/json"):s["Content-Type"]="application/json";const r=(i.size||0)<6e4;try{const t=await fetch(e,{method:"POST",headers:s,body:i,keepalive:r});if(!t.ok&&n)throw new Error(`HTTP ${t.status}`);return t}catch(o){throw n&&ae(e,t),o}}const le={email:{pattern:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,replacement:"[EMAIL_REDACTED]"},phone:{pattern:/(?:\+?1[-.\s]?)?(?:\(?[0-9]{3}\)?[-.\s]?)?[0-9]{3}[-.\s]?[0-9]{4}/g,replacement:"[PHONE_REDACTED]"},creditCard:{pattern:/(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12})/g,replacement:"[CC_REDACTED]"},ssn:{pattern:/\b\d{3}[-.\s]?\d{2}[-.\s]?\d{4}\b/g,replacement:"[SSN_REDACTED]"},ipAddress:{pattern:/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/g,replacement:"[IP_REDACTED]"}};function de(e){if("string"!=typeof e)return e;let t=e;for(const[e,n]of Object.entries(le))t=t.replace(n.pattern,n.replacement);return t}function ue(e,t=0){if(t>10)return e;if(null==e)return e;if("string"==typeof e)return de(e);if(Array.isArray(e))return e.map(e=>ue(e,t+1));if("object"==typeof e){const n={};for(const[o,i]of Object.entries(e))n[o]=ue(i,t+1);return n}return e}const pe=[];let he=0,me=0,fe=null,ge=!1;function ve(e){pe.push({...e,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname}),pe.length>=10?we():fe||(fe=setTimeout(we,2e3))}async function we(){if(fe&&(clearTimeout(fe),fe=null),0===pe.length)return;const e=pe.splice(0,pe.length);try{await ce(p,{events:e,siteId:i,sessionId:ze},!1)}catch(e){console.warn("[Navlens] Debug event send failed:",e.message)}}setInterval(async function(){const e=pe.splice(0,pe.length),t=void 0!==Ne?Ne.splice(0,Ne.length):[];if(0!==e.length||0!==t.length){if(fe&&(clearTimeout(fe),fe=null),void 0!==Ce&&Ce&&(clearTimeout(Ce),Ce=null),w)try{return void await ce(g,{siteId:i,sessionId:ze,batch:{debug:e.length>0?e:void 0,forms:t.length>0?t:void 0}},!1)}catch(e){console.warn("[Navlens] Batch send failed, falling back to individual:",e.message),w=!1}e.length>0&&ce(p,{events:e,siteId:i,sessionId:ze},!1).catch(()=>{}),t.length>0&&ce(h,{events:t,siteId:i,sessionId:ze},!1).catch(()=>{})}},3e3);const _e={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};function ye(){try{throw new Error}catch(t){return(e.stack||"").split("\n").slice(3).join("\n").substring(0,2e3)}}["log","warn","error","info","debug"].forEach(function(e){console[e]=function(...t){if(_e[e].apply(console,t),he>=100)return;const n=t.map(e=>{try{return"object"==typeof e?JSON.stringify(e):String(e)}catch{return"[Unserializable]"}}).join(" ");n.includes("[Navlens]")||(he++,ve({type:"console",level:e,message:de(n.substring(0,5e3)),stack:"error"===e?ye():""}))}}),window.addEventListener("error",function(e){he>=100||(he++,ve({type:"console",level:"error",message:de(`Uncaught: ${e.message}`),stack:e.error?.stack?de(e.error.stack.substring(0,2e3)):""}))}),window.addEventListener("unhandledrejection",function(e){if(he>=100)return;he++;const t=e.reason;ve({type:"console",level:"error",message:de(`Unhandled Promise: ${t?.message||String(t)}`),stack:t?.stack?de(t.stack.substring(0,2e3)):""})});const be=["/api/v1/ingest","/api/v1/debug-events","/api/rrweb-events","/api/dom-snapshot","navlens"];function ke(e){return!(!e||"string"!=typeof e)&&be.some(t=>e.includes(t))}function Se(e){try{const t=new URL(e,window.location.origin);return["token","key","password","secret","auth","api_key","apikey","access_token"].forEach(e=>{t.searchParams.has(e)&&t.searchParams.set(e,"[REDACTED]")}),t.toString()}catch{return de(String(e))}}const xe=window.fetch;window.fetch=function(...e){let t="",n="GET";try{const o=e[0],i=e[1];"string"==typeof o?t=o:o instanceof URL?t=o.toString():o instanceof Request?(t=o.url,n=o.method||"GET"):"object"==typeof o&&null!==o&&"url"in o&&(t=o.url),i&&"object"==typeof i&&i.method&&(n=i.method)}catch(t){return xe.apply(this,e)}if(t&&ke(t))return xe.apply(this,e);const o=performance.now();return xe.apply(this,e).then(e=>{const i=Math.round(performance.now()-o);return me<200&&(me++,ve({type:"network",method:n.toUpperCase(),url:Se(t),status:e.status,duration_ms:i,network_type:"fetch",initiator:"script"})),e}).catch(e=>{const i=Math.round(performance.now()-o);throw me<200&&(me++,ve({type:"network",method:n.toUpperCase(),url:Se(t),status:0,duration_ms:i,network_type:"fetch",initiator:"script"})),e})};const Ee=XMLHttpRequest.prototype.open,Ie=XMLHttpRequest.prototype.send;function Te(e,t){const[n,o]={LCP:[2500,4e3],FID:[100,300],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]}[e]||[1/0,1/0];return t<=n?"good":t<=o?"needs-improvement":"poor"}XMLHttpRequest.prototype.open=function(e,t){return this._navlens_method=e,this._navlens_url=t,this._navlens_start=null,Ee.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){const e=this._navlens_url;if(ke(e))return Ie.apply(this,arguments);this._navlens_start=performance.now();const t=this._navlens_method||"GET";return this.addEventListener("loadend",()=>{if(me>=200)return;const n=Math.round(performance.now()-this._navlens_start);me++,ve({type:"network",method:t.toUpperCase(),url:Se(e),status:this.status,duration_ms:n,network_type:"xhr",initiator:"script"})}),Ie.apply(this,arguments)},function(){if("undefined"!=typeof PerformanceObserver){try{new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];n&&ve({type:"web_vital",vital_name:"LCP",vital_value:Math.round(n.startTime),vital_rating:Te("LCP",n.startTime)})}).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{const t=e.getEntries().find(e=>"first-contentful-paint"===e.name);t&&ve({type:"web_vital",vital_name:"FCP",vital_value:Math.round(t.startTime),vital_rating:Te("FCP",t.startTime)})}).observe({type:"paint",buffered:!0})}catch(e){}try{let e=0;new PerformanceObserver(t=>{for(const n of t.getEntries())n.hadRecentInput||(e+=n.value)}).observe({type:"layout-shift",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"!==document.visibilityState||ge||ve({type:"web_vital",vital_name:"CLS",vital_value:Math.round(1e3*e)/1e3,vital_rating:Te("CLS",e)})})}catch(e){}try{let e=0;new PerformanceObserver(t=>{for(const n of t.getEntries()){const t=n.processingEnd-n.startTime;t>e&&(e=t)}}).observe({type:"event",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e>0&&!ge&&(ve({type:"web_vital",vital_name:"INP",vital_value:Math.round(e),vital_rating:Te("INP",e)}),ge=!0,we())})}catch(e){}try{const e=performance.getEntriesByType("navigation")[0];if(e){const t=e.responseStart-e.requestStart;ve({type:"web_vital",vital_name:"TTFB",vital_value:Math.round(t),vital_rating:Te("TTFB",t)})}}catch(e){}}}(),window.addEventListener("beforeunload",we),window.addEventListener("pagehide",we);const Ne=[];let Ce=null;const Me=new Map,Le=new Map,De=[/password/i,/ssn/i,/social.*security/i,/credit.*card/i,/card.*number/i,/cvv/i,/cvc/i,/pin/i,/secret/i];function Ae(e){if("password"===e.type)return!0;const t=(e.name||"")+(e.id||"");return De.some(e=>e.test(t))}function Oe(e){const t=e.getAttribute("id");if(t)return`id:${t}`;const n=e.getAttribute("name");if(n)return`name:${n}`;return`form:${Array.from(document.forms).indexOf(e)}`}function $e(e){if(e.id)return e.id;if(e.name)return e.name;const t=e.form;if(t){const n=Array.from(t.elements).filter(t=>t.type===e.type).indexOf(e);return`${e.type}_${n}`}return`field_${Math.random().toString(36).substr(2,9)}`}function Fe(e){const t=e.form;if(!t)return 0;return Array.from(t.elements).filter(e=>["input","select","textarea"].includes(e.tagName.toLowerCase())&&!["hidden","submit","button","reset"].includes(e.type)).indexOf(e)+1}function Pe(e){Ne.push({...e,timestamp:(new Date).toISOString()}),Ne.length>=10?Re():Ce||(Ce=setTimeout(Re,3e3))}async function Re(){if(Ce&&(clearTimeout(Ce),Ce=null),0===Ne.length)return;const e=Ne.splice(0,Ne.length);try{await ce(h,{events:e,siteId:i,sessionId:ze},!1)}catch(e){}}function je(e){const t=Oe(e.target),n=Le.get(t);n&&(n.hasSubmitted=!0,Pe({form_id:t,form_url:window.location.href,field_id:"",field_name:"",field_type:"",field_index:0,interaction_type:"submit",was_submitted:!0}),Re())}function Ue(){Le.forEach((e,t)=>{!e.hasSubmitted&&e.fields.size>0&&Pe({form_id:t,form_url:window.location.href,field_id:"",field_name:"",field_type:"",field_index:0,interaction_type:"abandon",was_submitted:!1})}),Re()}function He(){try{const e=localStorage.getItem(V);if(e){const t=JSON.parse(e);t.lastActivity=Date.now(),localStorage.setItem(V,JSON.stringify(t))}}catch(e){}}function Be(){return"sess_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+"_"+Date.now()}function qe(){return"evt_"+Math.random().toString(36).substring(2,15)+"_"+Date.now()}document.addEventListener("focusin",e=>{e.target.tagName&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&function(e){const t=e.target;if(!t.form||Ae(t))return;const n=$e(t),o=Oe(t.form),i=Date.now();Me.set(n,{focusTime:i,changeCount:0,lastValueLength:(t.value||"").length,wasRefilled:!1}),Le.has(o)||Le.set(o,{fields:new Set,hasSubmitted:!1}),Le.get(o).fields.add(n),Pe({form_id:o,form_url:window.location.href,field_id:n,field_name:t.name||"",field_type:t.type||"text",field_index:Fe(t),interaction_type:"focus",focus_time:new Date(i).toISOString()})}(e)},!0),document.addEventListener("focusout",e=>{e.target.tagName&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&function(e){const t=e.target;if(!t.form||Ae(t))return;const n=$e(t),o=Oe(t.form),i=Me.get(n),a=Date.now();if(i){const e=a-i.focusTime,s=(t.value||"").length>0;Pe({form_id:o,form_url:window.location.href,field_id:n,field_name:t.name||"",field_type:t.type||"text",field_index:Fe(t),interaction_type:"blur",focus_time:new Date(i.focusTime).toISOString(),blur_time:new Date(a).toISOString(),time_spent_ms:Math.min(e,36e5),change_count:i.changeCount,was_refilled:i.wasRefilled,field_had_value:s}),Me.delete(n)}}(e)},!0),document.addEventListener("input",e=>{e.target.tagName&&["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&function(e){const t=e.target;if(!t.form||Ae(t))return;const n=$e(t),o=Me.get(n);if(o){o.changeCount++;const e=(t.value||"").length,n=o.lastValueLength;n>0&&e<.5*n?o.deletedContent=!0:o.deletedContent&&e>n&&(o.wasRefilled=!0,o.deletedContent=!1),o.lastValueLength=e}}(e)},!0),document.addEventListener("submit",je,!0),window.addEventListener("beforeunload",Ue),window.addEventListener("pagehide",Ue),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&Ue()});let ze=function(){try{const e=localStorage.getItem(V);if(e){const t=JSON.parse(e),n=Date.now();if(n-t.lastActivity<18e5)return t.lastActivity=n,localStorage.setItem(V,JSON.stringify(t)),t.id}}catch(e){}const e={id:Be(),createdAt:Date.now(),lastActivity:Date.now()};return localStorage.setItem(V,JSON.stringify(e)),e.id}(),Xe=function(){try{const e=localStorage.getItem(W);if(e)return e}catch(e){}const e="vis_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+"_"+Date.now();try{localStorage.setItem(W,e)}catch(e){}return e}();function Ye(){const e=navigator.userAgent;let t="Unknown";return e.includes("Firefox/")?t="Firefox":e.includes("Edg/")?t="Edge":e.includes("Chrome/")?t="Chrome":e.includes("Safari/")&&!e.includes("Chrome")?t="Safari":(e.includes("MSIE")||e.includes("Trident/"))&&(t="IE"),t}function Ve(){const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"}function We(){return{browser:Ye(),device_type:Ve(),screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,user_agent:navigator.userAgent,language:navigator.language,platform:navigator.platform}}function Je(){return{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}}function Ge(){try{const e=document.body;if(!e)return null;const t=e.querySelectorAll("*");let n="";const o=Math.max(1,Math.floor(t.length/500));for(let e=0;e<t.length;e+=o){const o=t[e];if(n+=o.tagName,o.id&&(n+="#"+o.id),o.className&&"string"==typeof o.className){const e=o.className.trim().split(/\s+/).slice(0,2).join(".");e&&(n+="."+e)}n+="|"}const i=Je();n+=`D:${i.width}x${i.height}`;let a=5381;for(let e=0;e<n.length;e++)a=(a<<5)+a+n.charCodeAt(e),a&=a;return a.toString(36)}catch(e){return console.warn("[Navlens] DOM hash generation failed:",e),null}}async function Ze(){const e=Ge();e&&J&&e!==J&&(console.log("[Navlens] DOM structure changed, capturing new snapshot"),Q(async()=>{const t=await pt();t&&(t.hash=e,t.previous_hash=J,await ht(t))},"idle")),J=e}function Ke(){J=Ge(),G=setInterval(Ze,18e5),window.addEventListener("resize",function(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}}(Ze,1e3)),window.addEventListener("orientationchange",()=>setTimeout(Ze,500))}function Qe(e){if(!e)return"";const t=[];let n=e;for(;n&&n!==document.body&&t.length<5;){let e=n.tagName.toLowerCase();if(n.id){e+=`#${n.id}`,t.unshift(e);break}if(n.className&&"string"==typeof n.className){const t=n.className.trim().split(/\s+/).filter(e=>e&&!e.startsWith("ng-"));t.length>0&&(e+="."+t.slice(0,2).join("."))}const o=n.parentElement;if(o){const t=Array.from(o.children).filter(e=>e.tagName===n.tagName);if(t.length>1){const o=t.indexOf(n);o>=0&&(e+=`:nth-of-type(${o+1})`)}}t.unshift(e),n=o}return t.join(" > ")}function et(e){const t=e.getBoundingClientRect();return{x:Math.round(t.left+window.scrollX),y:Math.round(t.top+window.scrollY),width:Math.round(t.width),height:Math.round(t.height),viewport_x:Math.round(t.left),viewport_y:Math.round(t.top)}}function tt(e){if(!e)return!1;if(["A","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO","AUDIO"].includes(e.tagName))return!0;if("button"===e.getAttribute("role"))return!0;if(null!==e.getAttribute("tabindex"))return!0;if(e.onclick)return!0;return"pointer"===window.getComputedStyle(e).cursor}let nt=!1,ot=null;let it=[],at=!1;function st(e){return new Promise((t,n)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const o=document.createElement("script");o.src=e,o.onload=t,o.onerror=n,document.head.appendChild(o)})}async function rt(){if("undefined"==typeof rrweb)try{console.log("[Navlens] Loading rrweb..."),await st(`${r}/rrweb.min.js`)}catch(e){return void console.warn("[Navlens] Failed to load rrweb, session recording disabled")}if(!at)try{at=!0,rrweb.record({emit(e){const t=ue(e);it.push(t),it.length>=100&&function(){if(ct||lt)return;ct=!0,setTimeout(()=>{ct=!1,ut()},dt)}()},sampling:{mousemove:50,mouseInteraction:!0,scroll:150,input:"last"},blockClass:"navlens-block",ignoreClass:"navlens-ignore",maskTextClass:"navlens-mask",maskAllInputs:!0}),setInterval(ut,1e4),console.log("[Navlens] Session recording initialized")}catch(e){console.error("[Navlens] Failed to initialize rrweb:",e),at=!1}}let ct=!1,lt=!1;const dt=5e3;async function ut(){if(lt||0===it.length)return;lt=!0;const e=it.splice(0,it.length),t=We(),n={site_id:i,session_id:ze,visitor_id:Xe,events:e,timestamp:(new Date).toISOString(),page_path:window.location.pathname,user_agent:navigator.userAgent,screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,referrer:document.referrer,device_pixel_ratio:window.devicePixelRatio||1,platform:navigator.platform,cookie_enabled:navigator.cookieEnabled,online:navigator.onLine,device_type:t.device_type};try{await ce(d,n)}catch(t){console.error("[Navlens] Failed to send rrweb events:",t);const n=e.slice(0,500-it.length);it.unshift(...n)}finally{lt=!1}}async function pt(e=null){return Q(async()=>{if(void 0===window.rrwebSnapshot||!window.rrwebSnapshot?.snapshot)try{console.log("[Navlens] Loading rrweb-snapshot..."),await st("https://cdn.jsdelivr.net/npm/rrweb-snapshot@latest/dist/rrweb-snapshot.min.js")}catch(e){return console.warn("[Navlens] Failed to load rrweb-snapshot"),null}if(void 0===window.rrwebSnapshot||!window.rrwebSnapshot?.snapshot)return console.warn("[Navlens] rrweb-snapshot still not loaded after attempt"),null;try{const t=window.rrwebSnapshot.snapshot(document);return{site_id:i,page_path:window.location.pathname,device_type:e?e.name:Ve(),snapshot:ue(t),width:e?e.width:window.innerWidth,height:e?e.height:window.innerHeight,origin:window.location.origin,timestamp:(new Date).toISOString()}}catch(e){return console.error("[Navlens] Snapshot capture failed:",e),null}},"normal")}async function ht(e){if(e)try{await ce(u,e),console.log("[Navlens] Snapshot sent successfully")}catch(e){console.error("[Navlens] Failed to send snapshot:",e)}}let mt=0,ft=null;function gt(){window.addEventListener("scroll",()=>{clearTimeout(ft),ft=setTimeout(()=>{const e=(()=>{const e=window.scrollY,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-window.innerHeight;if(t<=0)return 100;const n=Math.round(e/t*100);return Math.min(Math.max(n,0),100)})();e>mt&&(mt=e)},100)},{passive:!0})}const vt=5,wt=2e3,_t=50,yt=5e3;let bt=[],kt=window.scrollY,St=null,xt=0,Et=null;function It(){const e=window.scrollY,t=e-kt,n=Date.now();if(Math.abs(t)<_t)return void(kt=e);const o=t>0?"down":"up";if(null!==St&&o!==St&&bt.push({time:n,direction:o,delta:Math.abs(t)}),St=o,kt=e,bt=bt.filter(e=>n-e.time<wt),bt.length>20&&(bt=bt.slice(-20)),bt.length>=vt){if(n-xt<yt)return;const e=bt.reduce((e,t)=>e+t.delta,0)/bt.length,t=n-bt[0].time,o=bt.length/t*1e3;!function(e,t){const n=Je(),o={event_type:"confusion_scroll",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,scroll_depth:mt,confusion_scroll_score:parseFloat(e.toFixed(3)),cursor_direction_changes:t,document_width:n.width,document_height:n.height,device_info:We()};Y(c,o).catch(console.error),console.log("[Navlens] Confusion scrolling detected! Score:",e.toFixed(2))}(Math.min(1,o*e/500),bt.length),xt=n,bt=[]}}const Tt=50,Nt=500,Ct=50,Mt=1e4,Lt=200;let Dt=[],At=new Map,Ot={x:0,y:0},$t=0,Ft=null,Pt=null;function Rt(e){const t=Date.now();if(Pt)return;Pt=setTimeout(()=>Pt=null,Tt);const n=e.clientX,o=e.clientY,i=e.pageX,a=e.pageY,s=Je(),r=n-Ot.x,c=o-Ot.y,l=t-$t,d=Math.sqrt(r*r+c*c),u=l>0?d/l:0;Ot={x:n,y:o},$t=t;const p=document.elementFromPoint(n,o);let h="",m="";if(p){h=Qe(p);const e=p.tagName.toLowerCase();m=["h1","h2","h3","h4","h5","h6"].includes(e)?"heading":["p","article","section"].includes(e)?"content":["a","button"].includes(e)||"button"===p.getAttribute("role")?"interactive":["img","video","svg","canvas"].includes(e)?"media":["nav","header","footer"].includes(e)?"navigation":["form","input","select","textarea"].includes(e)?"form":"other",function(e,t){At.has(e)||At.set(e,{startTime:t,totalTime:0});const n=At.get(e);n.lastUpdate&&t-n.lastUpdate<200&&(n.totalTime+=t-n.lastUpdate);if(n.lastUpdate=t,At.size>100){const e=Array.from(At.entries());e.sort((e,t)=>(e[1].lastUpdate||0)-(t[1].lastUpdate||0));for(let t=0;t<20;t++)At.delete(e[t][0])}}(h,t)}Dt.push({x:i,y:a,x_relative:s.width>0?parseFloat((i/s.width).toFixed(4)):0,y_relative:s.height>0?parseFloat((a/s.height).toFixed(4)):0,velocity:parseFloat(u.toFixed(2)),timestamp:t,attention_zone:m,element_selector:h.substring(0,200)}),Dt.length>Lt&&(Dt=Dt.slice(-Lt)),Dt.length>=Ct?jt():Ft||(Ft=setTimeout(jt,Mt))}function jt(){if(Ft&&(clearTimeout(Ft),Ft=null),0===Dt.length)return;const e=Ht(Dt,3),t=function(e){if(e.length<2)return{totalDistance:0,directionChanges:0,avgVelocity:0,isErratic:!1};let t=0,n=0,o=0,i=null;for(let a=1;a<e.length;a++){const s=e[a].x-e[a-1].x,r=e[a].y-e[a-1].y,c=Math.sqrt(s*s+r*r);if(t+=c,o+=e[a].velocity||0,c>5){const e=Math.atan2(r,s);if(null!==i){const t=Math.abs(e-i);t>Math.PI/4&&t<7*Math.PI/4&&n++}i=e}}const a=o/e.length,s=t>Ut.MIN_DISTANCE&&n/t>Ut.ERRATIC_THRESHOLD;return{totalDistance:parseFloat(t.toFixed(2)),directionChanges:n,avgVelocity:parseFloat(a.toFixed(2)),isErratic:s}}(Dt.splice(0,Dt.length)),n=Je(),o={event_type:"mouse_move",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,cursor_path_distance:t.totalDistance,cursor_direction_changes:t.directionChanges,is_erratic_movement:t.isErratic,document_width:n.width,document_height:n.height,path_points:e.length,avg_velocity:t.avgVelocity,device_info:We()};if(Y(c,o).catch(console.error),t.isErratic){const e={event_type:"erratic_movement",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,cursor_path_distance:t.totalDistance,cursor_direction_changes:t.directionChanges,avg_velocity:t.avgVelocity,erratic_score:parseFloat((t.directionChanges/t.totalDistance).toFixed(4)),document_width:n.width,document_height:n.height,device_info:We()};Y(c,e).catch(console.error),console.log("[Navlens] Erratic mouse movement detected! Direction changes:",t.directionChanges)}}const Ut={ERRATIC_THRESHOLD:.4,MIN_DISTANCE:100};function Ht(e,t){if(e.length<=2)return e;let n=0,o=0;const i=e[0],a=e[e.length-1];for(let t=1;t<e.length-1;t++){const s=Bt(e[t],i,a);s>n&&(n=s,o=t)}if(n>t){const n=Ht(e.slice(0,o+1),t),i=Ht(e.slice(o),t);return n.slice(0,-1).concat(i)}return[i,a]}function Bt(e,t,n){const o=n.x-t.x,i=n.y-t.y;if(0===o&&0===i)return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));const a=((e.x-t.x)*o+(e.y-t.y)*i)/(o*o+i*i),s=t.x+a*o,r=t.y+a*i;return Math.sqrt(Math.pow(e.x-s,2)+Math.pow(e.y-r,2))}let qt=null;function zt(){qt=setInterval(()=>{const e=[];At.forEach((t,n)=>{t.totalTime>=Nt&&e.push({element_selector:n.substring(0,200),hover_duration_ms:t.totalTime})}),e.length>0&&function(e){if(0===e.length)return;const t=Je();e.sort((e,t)=>t.hover_duration_ms-e.hover_duration_ms).slice(0,10).forEach(e=>{const n={event_type:"hover",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:e.element_selector,hover_duration_ms:e.hover_duration_ms,document_width:t.width,document_height:t.height,device_info:We()};Y(c,n).catch(console.error)})}(e),At.clear()},3e4)}function Xt(e){const t=e.target;if(!t)return;if(t.closest("[data-navlens-ignore]"))return;He();const n=et(t),o=Qe(t),i=Je(),a=Math.round(e.pageX),s=Math.round(e.pageY),r=i.width>0?parseFloat((a/i.width).toFixed(4)):0,l=i.height>0?parseFloat((s/i.height).toFixed(4)):0;let d=t.innerText||t.textContent||"";d=de(d.substring(0,100).trim());const u={event_type:"click",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:o,element_tag:t.tagName.toLowerCase(),element_id:t.id||null,element_class:"string"==typeof t.className?t.className:null,element_text:d,element_href:t.href||t.closest("a")?.href||null,x:a,y:s,click_x:Math.round(e.clientX),click_y:Math.round(e.clientY),page_x:a,page_y:s,x_relative:r,y_relative:l,document_width:i.width,document_height:i.height,element_position:n,is_interactive:tt(t),is_dead_click:!1,scroll_depth:mt,device_info:We()};X(c,u),$("click",{element:t,selector:o}),async function(e){return nt=!1,new Promise(t=>{setTimeout(()=>{if(nt)t(!1);else{if(tt(e)){const n=e.tagName;if("A"===n&&e.href)return void t(!1);if(["INPUT","SELECT","TEXTAREA"].includes(n))return void t(!1)}tt(e)?t(!1):t(!0)}},300)})}(t).then(e=>{if(e){const e={event_type:"dead_click",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:o,element_tag:t.tagName?.toLowerCase()||"",x:a,y:s,x_relative:r,y_relative:l,document_width:i.width,document_height:i.height,device_info:We()};Y(c,e).catch(console.error)}})}function Yt(){const e={event_type:"page_view",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,page_title:document.title,referrer:document.referrer||null,device_info:We()};X(c,e)}const Vt=[];function Wt(e){const t=Date.now(),n=e.clientX,o=e.clientY;for(Vt.length>100&&Vt.splice(0,Vt.length-100),Vt.push({x:n,y:o,time:t});Vt.length>0&&t-Vt[0].time>1e3;)Vt.shift();if(Vt.length>=3){const t=Vt.slice(-3),n=t.reduce((e,t)=>e+t.x,0)/t.length,o=t.reduce((e,t)=>e+t.y,0)/t.length;t.every(e=>Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-o,2))<50)&&(console.log("[Navlens] Rage click detected!"),function(e,t){const n=e.target,o=et(n),i=Qe(n),a=Je(),s=Math.round(e.pageX),r=Math.round(e.pageY),l={event_type:"rage_click",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,element_selector:i,element_tag:n.tagName.toLowerCase(),click_count:t,x:s,y:r,click_x:Math.round(e.clientX),click_y:Math.round(e.clientY),x_relative:a.width>0?parseFloat((s/a.width).toFixed(4)):0,y_relative:a.height>0?parseFloat((r/a.height).toFixed(4)):0,document_width:a.width,document_height:a.height,element_position:o,device_info:We()};Y(c,l).catch(console.error)}(e,t.length),Vt.length=0)}}let Jt=Date.now(),Gt=0;function Zt(){if("visible"===document.visibilityState&&(Gt+=Date.now()-Jt),it.length>0){const e=We(),t={site_id:i,session_id:ze,visitor_id:Xe,events:it,timestamp:(new Date).toISOString(),page_path:window.location.pathname,user_agent:navigator.userAgent,screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,referrer:document.referrer,device_type:e.device_type},n=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon(d,n)}const e={event_type:"session_end",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,max_scroll_depth:mt,total_visible_time_ms:Gt,device_info:We()};X(c,e),G&&clearInterval(G)}function Kt(){if(o){if(console.log("[Navlens] Initializing tracker v5.2 (Enterprise Edition)"),ot||(ot=new MutationObserver(e=>{for(const t of e){if("childList"===t.type&&(t.addedNodes.length>0||t.removedNodes.length>0))return void(nt=!0);if("attributes"===t.type){const e=t.attributeName;if(!["class","style","data-loading","aria-expanded","aria-hidden"].includes(e))continue;return void(nt=!0)}}}),ot.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style","data-loading","aria-expanded","aria-hidden"]})),gt(),document.addEventListener("visibilitychange",()=>{if("hidden"===document.visibilityState){Gt+=Date.now()-Jt;const e={event_type:"visibility_hidden",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,visible_time_ms:Date.now()-Jt,total_visible_time_ms:Gt,scroll_depth:mt,device_info:We()};X(c,e)}else Jt=Date.now(),He()}),window.addEventListener("scroll",()=>{clearTimeout(Et),Et=setTimeout(It,50)},{passive:!0}),document.addEventListener("mousemove",Rt,{passive:!0}),document.addEventListener("mouseleave",()=>{jt()}),zt(),Q(()=>{},"idle"),Yt(),document.addEventListener("click",e=>{Xt(e),Wt(e)},{passive:!0}),Q(()=>{rt()},"idle"),setTimeout(()=>{Q(async()=>{const e=await pt();e&&(e.hash=Ge(),ht(e)),Ke()},"idle")},5e3),window.addEventListener("beforeunload",Zt),window.addEventListener("pagehide",Zt),void 0!==window.history){const e=history.pushState,t=history.replaceState;history.pushState=function(){e.apply(this,arguments),Yt(),mt=0,setTimeout(Ze,500)},history.replaceState=function(){t.apply(this,arguments),Yt()},window.addEventListener("popstate",()=>{Yt(),mt=0,setTimeout(Ze,500)})}console.log("[Navlens] Tracker initialized successfully"),console.log("[Navlens] Features: VoC Widget ‚úì | Micro-Surveys ‚úì | Frustration ‚úì | Compression ‚úì | PII Scrubbing ‚úì | Dead Click ‚úì | Hover ‚úì | Cursor Paths ‚úì")}else console.error("[Navlens] No API key provided. Add data-api-key attribute to the script tag.")}window.Navlens={version:"7.0.0",sessionId:ze,track:(e,t={})=>{const n={event_type:"custom",event_name:e,event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,properties:ue(t),device_info:We()};Y(c,n).catch(console.error)},identify:(e,t={})=>{const n={event_type:"identify",event_id:qe(),session_id:ze,timestamp:(new Date).toISOString(),page_url:window.location.href,page_path:window.location.pathname,user_id:de(String(e)),traits:ue(t),device_info:We()};Y(c,n).catch(console.error)},captureSnapshot:async()=>{const e=await pt();return e&&(e.hash=Ge(),await ht(e)),e},getSession:()=>({sessionId:ze,scrollDepth:mt,isRecording:at,totalVisibleTime:Gt,domHash:J}),refreshSession:()=>{ze=Be();const e={id:ze,createdAt:Date.now(),lastActivity:Date.now()};return localStorage.setItem(V,JSON.stringify(e)),window.Navlens.sessionId=ze,ze},checkDomChanges:()=>{Ze()},getDomHash:()=>Ge(),getSessionId:()=>ze,getVisitorId:()=>Xe,setContext:(e={})=>{"object"==typeof e&&(window.__navlens_context={...window.__navlens_context||{},...e})},scrubPII:de,scrubObjectPII:ue},window.navlens=window.Navlens;let Qt={enabled:!0,position:"bottom-right",primaryColor:"#3B82F6",showOnScroll:50,showAfterTime:3e4,allowDismiss:!0,collectIntent:!0,collectIssues:!0,showExitIntent:!0,showFrustrationSurvey:!0};const en=[{value:1,emoji:"üò°",label:"Very Bad"},{value:2,emoji:"üòû",label:"Bad"},{value:3,emoji:"üòê",label:"Okay"},{value:4,emoji:"üòä",label:"Good"},{value:5,emoji:"üòç",label:"Excellent"}],tn=[{code:"cant_find",label:"Couldn't find what I need",icon:"üîç"},{code:"confusing",label:"Confusing navigation",icon:"üß≠"},{code:"slow",label:"Page too slow",icon:"‚è≥"},{code:"broken",label:"Something broken",icon:"üîß"},{code:"pricing",label:"Pricing unclear",icon:"üí∞"},{code:"other",label:"Other issue",icon:"‚ùì"}],nn=[{code:"buy",label:"Buy",icon:"üõí"},{code:"learn",label:"Learn",icon:"üìö"},{code:"compare",label:"Compare",icon:"‚öñÔ∏è"},{code:"support",label:"Get Help",icon:"üí¨"},{code:"browse",label:"Just Browsing",icon:"üëÄ"}];let on=null,an=!1,sn=!1,rn=!1;function cn(){const e=document.createElement("button");e.className=`navlens-feedback-btn ${Qt.position}`,e.style.backgroundColor=Qt.primaryColor,e.innerHTML='\n      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>\n      </svg>\n      <span>Feedback</span>\n    ',e.onclick=ln,document.body.appendChild(e),on=e}function ln(){if(an)return;an=!0,on&&on.classList.add("navlens-hidden");const e=document.createElement("div");e.id="navlens-feedback-modal",e.className="navlens-feedback-modal";let t="rating",n=null,o=[],a=null,s="";e.innerHTML=`\n      <div class="navlens-feedback-backdrop"></div>\n      <div class="navlens-feedback-content">\n        <div class="navlens-feedback-header">\n          <h2 class="navlens-feedback-title">Share Your Feedback</h2>\n          <button class="navlens-feedback-close">\n            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <path d="M18 6L6 18M6 6l12 12"></path>\n            </svg>\n          </button>\n        </div>\n        <div class="navlens-feedback-body"></div>\n        ${Qt.allowDismiss?'\n        <div class="navlens-footer">\n          <button class="navlens-dismiss-btn">Don\'t show again on this page</button>\n        </div>\n        ':""}\n      </div>\n    `,document.body.appendChild(e),e.querySelector(".navlens-feedback-backdrop").onclick=dn,e.querySelector(".navlens-feedback-close").onclick=dn,Qt.allowDismiss&&(e.querySelector(".navlens-dismiss-btn").onclick=()=>{sn=!0,sessionStorage.setItem("navlens_feedback_dismissed","true"),dn()}),function r(){const c=e.querySelector(".navlens-feedback-body");if(c)if("rating"===t)c.innerHTML=`\n          <p class="navlens-feedback-step-title">How would you rate your experience?</p>\n          <div class="navlens-rating-group">\n            ${en.map(e=>`\n              <button class="navlens-rating-btn ${n===e.value?"selected":""}" \n                      data-rating="${e.value}" title="${e.label}">\n                ${e.emoji}\n              </button>\n            `).join("")}\n          </div>\n        `,c.querySelectorAll(".navlens-rating-btn").forEach(e=>{e.onclick=()=>{n=parseInt(e.dataset.rating),t=Qt.collectIssues&&n<=3?"issues":Qt.collectIntent?"intent":"message",r()}});else if("issues"===t)c.innerHTML=`\n          <p class="navlens-feedback-step-title">What went wrong?</p>\n          <div class="navlens-options-grid">\n            ${tn.map(e=>`\n              <button class="navlens-option-btn ${o.includes(e.code)?"selected":""}" \n                      data-issue="${e.code}">\n                <span class="navlens-option-icon">${e.icon}</span>\n                <span>${e.label}</span>\n              </button>\n            `).join("")}\n          </div>\n          <button class="navlens-submit-btn" ${0===o.length?"disabled":""}>Continue</button>\n          <button class="navlens-skip-btn">Skip</button>\n        `,c.querySelectorAll(".navlens-option-btn").forEach(e=>{e.onclick=()=>{const t=e.dataset.issue;o.includes(t)?o=o.filter(e=>e!==t):o.push(t),r()}}),c.querySelector(".navlens-submit-btn").onclick=()=>{t=Qt.collectIntent?"intent":"message",r()},c.querySelector(".navlens-skip-btn").onclick=()=>{t=Qt.collectIntent?"intent":"message",r()};else if("intent"===t)c.innerHTML=`\n          <p class="navlens-feedback-step-title">What brought you here today?</p>\n          <div class="navlens-options-grid">\n            ${nn.map(e=>`\n              <button class="navlens-option-btn ${a===e.code?"selected":""}" \n                      data-intent="${e.code}">\n                <span class="navlens-option-icon">${e.icon}</span>\n                <span>${e.label}</span>\n              </button>\n            `).join("")}\n          </div>\n          <button class="navlens-submit-btn" ${a?"":"disabled"}>Continue</button>\n          <button class="navlens-skip-btn">Skip</button>\n        `,c.querySelectorAll(".navlens-option-btn").forEach(e=>{e.onclick=()=>{a=e.dataset.intent,r()}}),c.querySelector(".navlens-submit-btn").onclick=()=>{t="message",r()},c.querySelector(".navlens-skip-btn").onclick=()=>{t="message",r()};else if("message"===t){c.innerHTML='\n          <p class="navlens-feedback-step-title">Any additional feedback? (optional)</p>\n          <textarea class="navlens-textarea" rows="4" placeholder="Tell us more about your experience..."></textarea>\n          <button class="navlens-submit-btn">Submit Feedback</button>\n        ';c.querySelector(".navlens-textarea").oninput=e=>{s=e.target.value},c.querySelector(".navlens-submit-btn").onclick=async e=>{const c=e.target,l=c.textContent;c.textContent="Sending...",c.disabled=!0,c.style.opacity="0.7",c.style.cursor="wait";await async function(e){const t={siteId:i,sessionId:ze,rating:e.selectedRating,intent:e.selectedIntent,issues:e.selectedIssues,message:de(e.feedbackMessage||""),pagePath:window.location.pathname,pageUrl:window.location.href,deviceType:Ve(),userAgent:navigator.userAgent,surveyType:"manual",timestamp:(new Date).toISOString()};try{return await ce(m,t,!1),console.log("[Navlens] Feedback submitted successfully"),!0}catch(e){return console.warn("[Navlens] Failed to submit feedback:",e.message),!1}}({selectedRating:n,selectedIssues:o,selectedIntent:a,feedbackMessage:s})?(t="success",r()):(c.textContent="Failed. Try Again",c.disabled=!1,c.style.opacity="1",c.style.cursor="pointer",setTimeout(()=>{c.textContent=l},3e3))}}else"success"===t&&(rn=!0,c.innerHTML='\n          <div class="navlens-success">\n            <div class="navlens-success-icon">üéâ</div>\n            <h3 class="navlens-success-title">Thank You!</h3>\n            <p class="navlens-success-text">Your feedback helps us improve.</p>\n          </div>\n        ',setTimeout(()=>{dn()},2e3))}()}function dn(){const e=document.getElementById("navlens-feedback-modal");e&&e.remove(),an=!1,!on||sn||rn||on.classList.remove("navlens-hidden")}async function un(){if(await async function(){if(i){if(x)return Qt={...Qt,enabled:x.enabled??!0,position:x.position||"bottom-right",primaryColor:x.primaryColor||"#3B82F6",allowDismiss:x.allowDismiss??!0,showExitIntent:x.showExitIntent??!0,showFrustrationSurvey:x.showFrustrationSurvey??!0,showAfterTime:1e3*(x.minTimeBeforeSurvey||30),showOnScroll:x.showOnScroll||50,collectIntent:x.collectIntent??!0,collectIssues:x.collectIssues??!0},void console.log("[Navlens] Feedback config loaded from merged endpoint");try{const e=await fetch(`${f}?siteId=${i}`,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();t.config&&(Qt={...Qt,enabled:t.config.enabled??!0,position:t.config.position||"bottom-right",primaryColor:t.config.primaryColor||"#3B82F6",allowDismiss:t.config.allowDismiss??!0,showExitIntent:t.config.showExitIntent??!0,showFrustrationSurvey:t.config.showFrustrationSurvey??!0,showAfterTime:1e3*(t.config.minTimeBeforeSurvey||30),showOnScroll:t.config.showOnScroll||50,collectIntent:t.config.collectIntent??!0,collectIssues:t.config.collectIssues??!0},console.log("[Navlens] Feedback config loaded from dashboard"))}}catch(e){console.warn("[Navlens] Failed to fetch feedback config, using defaults:",e.message)}}}(),!Qt.enabled)return;if("true"===sessionStorage.getItem("navlens_feedback_dismissed"))return void(sn=!0);!function(){if(document.getElementById("navlens-feedback-styles"))return;const e=document.createElement("link");e.id="navlens-feedback-styles",e.rel="stylesheet",e.href=`${r}/navlens-feedback.css`,document.head.appendChild(e)}();const e=()=>{on&&(on.style.backgroundColor=Qt.primaryColor)};let t=!1;setTimeout(()=>{on||sn||rn||(cn(),e())},Qt.showAfterTime),window.addEventListener("scroll",function(){if(t||sn||rn)return;window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100>=Qt.showOnScroll&&(t=!0,cn(),e())},{passive:!0}),Qt.showExitIntent&&document.addEventListener("mouseleave",t=>{t.clientY<0&&!an&&!sn&&!rn&&(on||(cn(),e()))},{once:!0})}const pn={lcp:null,cls:0,fid:null,inp:null,fcp:null,ttfb:null};let hn=0,mn=0,fn=null,gn=null,vn=null;function wn(){if(ge)return;ge=!0;const e={type:"web_vitals",timestamp:(new Date).toISOString(),session_id:ze,page_url:window.location.href,page_path:window.location.pathname,lcp_ms:Math.round(mn),cls:hn.toFixed(4),fid_ms:fn?Math.round(fn):null,inp_ms:pn.inp?Math.round(pn.inp):null,fcp_ms:gn?Math.round(gn):null,ttfb_ms:vn?Math.round(vn):null};console.log("[Navlens] Sending Web Vitals:",e);try{const t=z(e);ce(c,t,!1)}catch(e){console.warn("[Navlens] Failed to send Web Vitals:",e)}}function _n(){try{if("PerformanceObserver"in window){try{new PerformanceObserver(e=>{const t=e.getEntries();if(t.length>0){const e=t[t.length-1];mn=e.startTime,pn.lcp=mn}}).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{for(const t of e.getEntries())t.hadRecentInput||(hn+=t.value,pn.cls=hn)}).observe({type:"layout-shift",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{const t=e.getEntries();t.length>0&&null===fn&&(fn=t[0].processingStart-t[0].startTime,pn.fid=fn)}).observe({type:"first-input",buffered:!0})}catch(e){}try{let e=0;new PerformanceObserver(t=>{for(const n of t.getEntries()){const t=n.duration;t>e&&(e=t,pn.inp=e)}}).observe({type:"event",buffered:!0,durationThreshold:16})}catch(e){}}try{const e=performance.getEntriesByType("paint").find(e=>"first-contentful-paint"===e.name);e&&(gn=e.startTime,pn.fcp=gn)}catch(e){}try{const e=performance.getEntriesByType("navigation")[0];e&&(vn=e.responseStart-e.requestStart,pn.ttfb=vn)}catch(e){}window.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&wn()}),window.addEventListener("pagehide",wn),setTimeout(wn,1e4)}catch(e){console.warn("[Navlens] Web Vitals initialization failed:",e)}}function yn(){if(s)return;if(sessionStorage.getItem("navlens_notification_seen"))return;const e=document.createElement("div");e.id="navlens-notification-banner",e.innerHTML='\n      <style>\n        #navlens-notification-banner {\n          position: fixed;\n          bottom: 24px;\n          right: 24px;\n          max-width: 320px;\n          width: calc(100% - 48px);\n          background: rgba(255, 255, 255, 0.8);\n          backdrop-filter: blur(12px);\n          -webkit-backdrop-filter: blur(12px);\n          box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);\n          border: 1px solid rgba(255, 255, 255, 0.3);\n          border-radius: 16px;\n          padding: 16px;\n          z-index: 2147483647;\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n          animation: navlens-slide-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;\n          color: #1f2937;\n          display: flex;\n          align-items: flex-start;\n          gap: 12px;\n          pointer-events: none; /* Let clicks pass through if needed, though usually better to capture */\n          pointer-events: auto;\n          transition: opacity 0.5s ease, transform 0.5s ease;\n        }\n\n        @media (prefers-color-scheme: dark) {\n          #navlens-notification-banner {\n            background: rgba(17, 24, 39, 0.8);\n            color: #f9fafb;\n            border-color: rgba(255, 255, 255, 0.1);\n            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);\n          }\n        }\n\n        @keyframes navlens-slide-up {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .navlens-icon-wrapper {\n          width: 36px;\n          height: 36px;\n          border-radius: 10px;\n          background: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3);\n        }\n\n        .navlens-icon {\n          width: 20px;\n          height: 20px;\n          color: white;\n        }\n\n        .navlens-content {\n          flex: 1;\n        }\n\n        .navlens-title {\n          font-weight: 600;\n          font-size: 14px;\n          margin: 0 0 4px 0;\n          line-height: 1.3;\n        }\n\n        .navlens-text {\n          font-size: 12px;\n          line-height: 1.5;\n          margin: 0;\n          opacity: 0.8;\n        }\n      </style>\n      \n      <div class="navlens-icon-wrapper">\n        <svg class="navlens-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>\n          <path d="M9 12l2 2 4-4"></path>\n        </svg>\n      </div>\n      <div class="navlens-content">\n        <h3 class="navlens-title">Anonymous Analytics</h3>\n        <p class="navlens-text">\n          This site uses anonymous tracking to improve user experience.\n        </p>\n      </div>\n    ',document.body.appendChild(e),sessionStorage.setItem("navlens_notification_seen","true"),setTimeout(()=>{e&&(e.style.opacity="0",e.style.transform="translateY(10px)",setTimeout(()=>e.remove(),500))},5e3)}s||("complete"===document.readyState?_n():window.addEventListener("load",_n)),s||(C().then(()=>{try{Kt()}catch(e){console.warn("[Navlens] init() missing",e)}un()}).catch(e=>{console.warn("[Navlens] Init failed:",e);const n=document.getElementById(t);n&&n.remove()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(yn,1e3)}):setTimeout(yn,1e3)),console.log("[Navlens] Tracker initialized. Use navlens.track() for custom events.")}();